function getIdSelections(){return $.map($($table).bootstrapTable("getSelections"),function(n){return n.id})}function responseHandler(n){return $.each(n.rows,function(n,t){t.state=$.inArray(t.id,selections)!==-1}),n}function detailFormatter(n,t){var i=[];return $.each(t,function(n,t){i.push("<p><b>"+n+":<\/b> "+t+"<\/p>")}),i.join("")}function cmdFormatter(){return['<a class="edit isTooltip" href="javascript:void(0)" data-toggle="modal" data-target="'+ModalEdit+'" title="'+TMLanguage("Global.edit")+'">','<i class="fa fa-pencil-square-o" aria-hidden="true"><\/i><\/a>  ','<a class="delete isTooltip" href="javascript:void(0)" title="'+(params_flag==0?TMLanguage("Global.recover"):TMLanguage("Global.delete"))+'">','<i class="fa '+(params_flag==0?"fa-recycle":"fa-times")+'" aria-hidden="true"><\/i><\/a>'].join("")}function iconFormatter(n){return'<i class="'+n+'" aria-hidden="true"><\/i>'}function resetPassFormatter(){return'<span class="badge badge-success resetPass" role="button">Reset<\/span>'}function totalTextFormatter(){return"Total"}function totalNameFormatter(n){return n.length}function totalPriceFormatter(n){var t=0;return $.each(n,function(n,i){t+=+i.price.substring(1)}),"$"+t}function queryParams(n){return n.flag=params_flag,params_dateStart!=null&&(n.dateStart=params_dateStart),params_dateEnd!=null&&(n.dateEnd=params_dateEnd),n}function setFlagActive(){params_flag==1?($($indexBtnUse).addClass("active"),$($indexBtnTrash).removeClass("active"),$($indexBtnDeleteForever).hide(),$($indexBtnDeleteRecover).removeClass("btn-warning").addClass("btn-danger").attr("data-original-title",TMLanguage("Global.delete")).html('<i class="fa fa-times" aria-hidden="true"><\/i>')):($($indexBtnTrash).addClass("active"),$($indexBtnUse).removeClass("active"),$($indexBtnDeleteForever).show(),$($indexBtnDeleteRecover).removeClass("btn-danger").addClass("btn-warning").attr("data-original-title",TMLanguage("Global.recover")).html('<i class="fa fa-recycle" aria-hidden="true"><\/i>'))}(function(n){"use strict";var e=null,i=function(n){var i=arguments,t=!0,r=1;return n=n.replace(/%s/g,function(){var n=i[r++];return typeof n=="undefined"?(t=!1,""):n}),t?n:""},a=function(t,i,r,u){var f="";return n.each(t,function(n,t){return t[i]===u?(f=t[r],!1):!0}),f},v=function(t){for(var r,u,s=0,f=[],i=0;i<t[0].length;i++)s+=t[0][i].colspan||1;for(i=0;i<t.length;i++)for(f[i]=[],r=0;r<s;r++)f[i][r]=!1;for(i=0;i<t.length;i++)for(r=0;r<t[i].length;r++){var e=t[i][r],c=e.rowspan||1,h=e.colspan||1,o=n.inArray(!1,f[i]);for(h===1&&(e.fieldIndex=o,typeof e.field=="undefined"&&(e.field=o)),u=0;u<c;u++)f[i+u][o]=!0;for(u=0;u<h;u++)f[i][o+u]=!0}},s=function(){if(e===null){var r=n("<p/>").addClass("fixed-table-scroll-inner"),t=n("<div/>").addClass("fixed-table-scroll-outer"),u,i;t.append(r);n("body").append(t);u=r[0].offsetWidth;t.css("overflow","scroll");i=r[0].offsetWidth;u===i&&(i=t[0].clientWidth);t.remove();e=u-i}return e},r=function(t,r,u,f){var e=r,o;return(typeof r=="string"&&(o=r.split("."),o.length>1?(e=window,n.each(o,function(n,t){e=e[t]})):e=window[r]),typeof e=="object")?e:typeof e=="function"?e.apply(t,u||[]):!e&&typeof r=="string"&&i.apply(this,[r].concat(u))?i.apply(this,[r].concat(u)):f},h=function(t,i,r){var e=Object.getOwnPropertyNames(t),o=Object.getOwnPropertyNames(i),u="",f;if(r&&e.length!==o.length)return!1;for(f=0;f<e.length;f++)if(u=e[f],n.inArray(u,o)>-1&&t[u]!==i[u])return!1;return!0},u=function(n){return typeof n=="string"?n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#x60;"):n},c=function(n){var t,i;for(t in n)i=t.split(/(?=[A-Z])/).join("-").toLowerCase(),i!==t&&(n[i]=n[t],delete n[t]);return n},f=function(n,t,i){var r=n,f,e;if(typeof t!="string"||n.hasOwnProperty(t))return i?u(n[t]):n[t];f=t.split(".");for(e in f)f.hasOwnProperty(e)&&(r=r&&r[f[e]]);return i?u(r):r},l=function(){return!!(navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv\:11\./))},y=function(){Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,i=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(u){if(typeof u!="object"&&(typeof u!="function"||u===null))throw new TypeError("Object.keys called on non-object");var e=[],o,f;for(o in u)t.call(u,o)&&e.push(o);if(i)for(f=0;f<r;f++)t.call(u,n[f])&&e.push(n[f]);return e}}())},t=function(t,i){this.options=i;this.$el=n(t);this.$el_=this.$el.clone();this.timeoutId_=0;this.timeoutFooter_=0;this.init()},o;t.DEFAULTS={classes:"table table-hover",sortClass:undefined,locale:undefined,height:undefined,undefinedText:"-",sortName:undefined,sortOrder:"asc",sortStable:!1,rememberOrder:!1,striped:!1,columns:[[]],data:[],totalField:"total",dataField:"rows",method:"get",url:undefined,ajax:undefined,cache:!0,contentType:"application/json",dataType:"json",ajaxOptions:{},queryParams:function(n){return n},queryParamsType:"limit",responseHandler:function(n){return n},pagination:!1,onlyInfoPagination:!1,paginationLoop:!0,sidePagination:"client",totalRows:0,pageNumber:1,pageSize:10,pageList:[10,25,50,100],paginationHAlign:"right",paginationVAlign:"bottom",paginationDetailHAlign:"left",paginationPreText:"&lsaquo;",paginationNextText:"&rsaquo;",search:!1,searchOnEnterKey:!1,strictSearch:!1,searchAlign:"right",selectItemName:"btSelectItem",showHeader:!0,showFooter:!1,showColumns:!1,showPaginationSwitch:!1,showRefresh:!1,showToggle:!1,buttonsAlign:"right",smartDisplay:!0,escape:!1,minimumCountColumns:1,idField:undefined,uniqueId:undefined,cardView:!1,detailView:!1,detailFormatter:function(){return""},detailFilter:function(){return!0},trimOnSearch:!0,clickToSelect:!1,singleSelect:!1,toolbar:undefined,toolbarAlign:"left",checkboxHeader:!0,sortable:!0,silentSort:!0,maintainSelected:!1,searchTimeOut:500,searchText:"",iconSize:undefined,buttonsClass:"secondary isTooltip",iconsPrefix:"fa",icons:{paginationSwitchDown:"fa-caret-square-o-down",paginationSwitchUp:"fa-caret-square-o-up",refresh:"fa-refresh",toggle:"fa-list-alt",columns:"fa-list-ul",detailOpen:"fa-plus",detailClose:"fa-minus"},customSearch:n.noop,customSort:n.noop,rowStyle:function(){return{}},rowAttributes:function(){return{}},footerStyle:function(){return{}},onAll:function(){return!1},onClickCell:function(){return!1},onDblClickCell:function(){return!1},onClickRow:function(){return!1},onDblClickRow:function(){return!1},onSort:function(){return!1},onCheck:function(){return!1},onUncheck:function(){return!1},onCheckAll:function(){return!1},onUncheckAll:function(){return!1},onCheckSome:function(){return!1},onUncheckSome:function(){return!1},onLoadSuccess:function(){return!1},onLoadError:function(){return!1},onColumnSwitch:function(){return!1},onPageChange:function(){return!1},onSearch:function(){return!1},onToggle:function(){return!1},onPreBody:function(){return!1},onPostBody:function(){return!1},onPostHeader:function(){return!1},onExpandRow:function(){return!1},onCollapseRow:function(){return!1},onRefreshOptions:function(){return!1},onRefresh:function(){return!1},onResetView:function(){return!1}};t.LOCALES={};t.LOCALES["en-US"]=t.LOCALES.en={formatLoadingMessage:function(){return"Loading, please wait..."},formatRecordsPerPage:function(n){return i("%s rows per page",n)},formatShowingRows:function(n,t,r){return i("Showing %s to %s of %s rows",n,t,r)},formatDetailPagination:function(n){return i("Showing %s rows",n)},formatSearch:function(){return"Search"},formatNoMatches:function(){return"No matching records found"},formatPaginationSwitch:function(){return"Hide/Show pagination"},formatRefresh:function(){return"Refresh"},formatToggle:function(){return"Toggle"},formatColumns:function(){return"Columns"},formatAllRows:function(){return"All"}};n.extend(t.DEFAULTS,t.LOCALES["en-US"]);t.COLUMN_DEFAULTS={radio:!1,checkbox:!1,checkboxEnabled:!0,field:undefined,title:undefined,titleTooltip:undefined,"class":undefined,align:undefined,halign:undefined,falign:undefined,valign:undefined,width:undefined,sortable:!1,order:"asc",visible:!0,switchable:!0,clickToSelect:!0,formatter:undefined,footerFormatter:undefined,events:undefined,sorter:undefined,sortName:undefined,cellStyle:undefined,searchable:!0,searchFormatter:!0,cardVisible:!0,escape:!1};t.EVENTS={"all.bs.table":"onAll","click-cell.bs.table":"onClickCell","dbl-click-cell.bs.table":"onDblClickCell","click-row.bs.table":"onClickRow","dbl-click-row.bs.table":"onDblClickRow","sort.bs.table":"onSort","check.bs.table":"onCheck","uncheck.bs.table":"onUncheck","check-all.bs.table":"onCheckAll","uncheck-all.bs.table":"onUncheckAll","check-some.bs.table":"onCheckSome","uncheck-some.bs.table":"onUncheckSome","load-success.bs.table":"onLoadSuccess","load-error.bs.table":"onLoadError","column-switch.bs.table":"onColumnSwitch","page-change.bs.table":"onPageChange","search.bs.table":"onSearch","toggle.bs.table":"onToggle","pre-body.bs.table":"onPreBody","post-body.bs.table":"onPostBody","post-header.bs.table":"onPostHeader","expand-row.bs.table":"onExpandRow","collapse-row.bs.table":"onCollapseRow","refresh-options.bs.table":"onRefreshOptions","reset-view.bs.table":"onResetView","refresh.bs.table":"onRefresh"};t.prototype.init=function(){this.initLocale();this.initContainer();this.initTable();this.initHeader();this.initData();this.initHiddenRows();this.initFooter();this.initToolbar();this.initPagination();this.initBody();this.initSearchText();this.initServer()};t.prototype.initLocale=function(){if(this.options.locale){var t=this.options.locale.split(/-|_/);t[0].toLowerCase();t[1]&&t[1].toUpperCase();n.fn.bootstrapTable.locales[this.options.locale]?n.extend(this.options,n.fn.bootstrapTable.locales[this.options.locale]):n.fn.bootstrapTable.locales[t.join("-")]?n.extend(this.options,n.fn.bootstrapTable.locales[t.join("-")]):n.fn.bootstrapTable.locales[t[0]]&&n.extend(this.options,n.fn.bootstrapTable.locales[t[0]])}};t.prototype.initContainer=function(){this.$container=n(['<div class="bootstrap-table">','<div class="fixed-table-toolbar"><\/div>',this.options.paginationVAlign==="top"||this.options.paginationVAlign==="both"?'<div class="fixed-table-pagination" style="clear: both;"><\/div>':"",'<div class="fixed-table-container">','<div class="fixed-table-header"><table><\/table><\/div>','<div class="fixed-table-body">','<div class="fixed-table-loading">',this.options.formatLoadingMessage(),"<\/div>","<\/div>",'<div class="fixed-table-footer"><table><tr><\/tr><\/table><\/div>',this.options.paginationVAlign==="bottom"||this.options.paginationVAlign==="both"?'<div class="fixed-table-pagination"><\/div>':"","<\/div>","<\/div>"].join(""));this.$container.insertAfter(this.$el);this.$tableContainer=this.$container.find(".fixed-table-container");this.$tableHeader=this.$container.find(".fixed-table-header");this.$tableBody=this.$container.find(".fixed-table-body");this.$tableLoading=this.$container.find(".fixed-table-loading");this.$tableFooter=this.$container.find(".fixed-table-footer");this.$toolbar=this.$container.find(".fixed-table-toolbar");this.$pagination=this.$container.find(".fixed-table-pagination");this.$tableBody.append(this.$el);this.$container.after('<div class="clearfix"><\/div>');this.$el.addClass(this.options.classes);this.options.striped&&this.$el.addClass("table-striped");n.inArray("table-no-bordered",this.options.classes.split(" "))!==-1&&this.$tableContainer.addClass("table-no-bordered")};t.prototype.initTable=function(){var r=this,f=[],u=[],i;(this.$header=this.$el.find(">thead"),this.$header.length||(this.$header=n("<thead><\/thead>").appendTo(this.$el)),this.$header.find("tr").each(function(){var t=[];n(this).find("th").each(function(){typeof n(this).data("field")!="undefined"&&n(this).data("field",n(this).data("field")+"");t.push(n.extend({},{title:n(this).html(),"class":n(this).attr("class"),titleTooltip:n(this).attr("title"),rowspan:n(this).attr("rowspan")?+n(this).attr("rowspan"):undefined,colspan:n(this).attr("colspan")?+n(this).attr("colspan"):undefined},n(this).data()))});f.push(t)}),n.isArray(this.options.columns[0])||(this.options.columns=[this.options.columns]),this.options.columns=n.extend(!0,[],f,this.options.columns),this.columns=[],this.fieldsColumnsIndex=[],v(this.options.columns),n.each(this.options.columns,function(i,u){n.each(u,function(u,f){f=n.extend({},t.COLUMN_DEFAULTS,f);typeof f.fieldIndex!="undefined"&&(r.columns[f.fieldIndex]=f,r.fieldsColumnsIndex[f.field]=f.fieldIndex);r.options.columns[i][u]=f})}),this.options.data.length)||(i=[],this.$el.find(">tbody>tr").each(function(t){var f={};f._id=n(this).attr("id");f._class=n(this).attr("class");f._data=c(n(this).data());n(this).find(">td").each(function(u){for(var h=n(this),l=+h.attr("colspan")||1,a=+h.attr("rowspan")||1,s,o,e;i[t]&&i[t][u];u++);for(s=u;s<u+l;s++)for(o=t;o<t+a;o++)i[o]||(i[o]=[]),i[o][s]=!0;e=r.columns[u].field;f[e]=n(this).html();f["_"+e+"_id"]=n(this).attr("id");f["_"+e+"_class"]=n(this).attr("class");f["_"+e+"_rowspan"]=n(this).attr("rowspan");f["_"+e+"_colspan"]=n(this).attr("colspan");f["_"+e+"_title"]=n(this).attr("title");f["_"+e+"_data"]=c(n(this).data())});u.push(f)}),this.options.data=u,u.length&&(this.fromHtml=!0))};t.prototype.initHeader=function(){var t=this,f={},r=[];this.header={fields:[],styles:[],classes:[],formatters:[],events:[],sorters:[],sortNames:[],cellStyles:[],searchables:[]};n.each(this.options.columns,function(e,o){r.push("<tr>");e===0&&!t.options.cardView&&t.options.detailView&&r.push(i('<th class="detail" rowspan="%s"><div class="fht-cell"><\/div><\/th>',t.options.columns.length));n.each(o,function(n,e){var o="",c="",l="",s="",a=i(' class="%s"',e["class"]),y=t.options.sortOrder||e.order,v="px",h=e.width;if(e.width===undefined||t.options.cardView||typeof e.width=="string"&&e.width.indexOf("%")!==-1&&(v="%"),e.width&&typeof e.width=="string"&&(h=e.width.replace("%","").replace("px","")),c=i("text-align: %s; ",e.halign?e.halign:e.align),l=i("text-align: %s; ",e.align),s=i("vertical-align: %s; ",e.valign),s+=i("width: %s; ",(e.checkbox||e.radio)&&!h?"36px":h?h+v:undefined),typeof e.fieldIndex!="undefined"){if(t.header.fields[e.fieldIndex]=e.field,t.header.styles[e.fieldIndex]=l+s,t.header.classes[e.fieldIndex]=a,t.header.formatters[e.fieldIndex]=e.formatter,t.header.events[e.fieldIndex]=e.events,t.header.sorters[e.fieldIndex]=e.sorter,t.header.sortNames[e.fieldIndex]=e.sortName,t.header.cellStyles[e.fieldIndex]=e.cellStyle,t.header.searchables[e.fieldIndex]=e.searchable,!e.visible)return;if(t.options.cardView&&!e.cardVisible)return;f[e.field]=e}r.push("<th"+i(' title="%s"',e.titleTooltip),e.checkbox||e.radio?i(' class="bs-checkbox %s"',e["class"]||""):a,i(' style="%s"',c+s),i(' rowspan="%s"',e.rowspan),i(' colspan="%s"',e.colspan),i(' data-field="%s"',e.field),">");r.push(i('<div class="th-inner %s">',t.options.sortable&&e.sortable?"sortable both":""));o=t.options.escape?u(e.title):e.title;e.checkbox&&(!t.options.singleSelect&&t.options.checkboxHeader&&(o='<input name="btSelectAll" type="checkbox" />'),t.header.stateField=e.field);e.radio&&(o="",t.header.stateField=e.field,t.options.singleSelect=!0);r.push(o);r.push("<\/div>");r.push('<div class="fht-cell"><\/div>');r.push("<\/div>");r.push("<\/th>")});r.push("<\/tr>")});this.$header.html(r.join(""));this.$header.find("th[data-field]").each(function(){n(this).data(f[n(this).data("field")])});this.$container.off("click",".th-inner").on("click",".th-inner",function(i){var r=n(this);if(t.options.detailView&&r.closest(".bootstrap-table")[0]!==t.$container[0])return!1;if(t.options.sortable&&r.parent().data().sortable)t.onSort(i)});this.$header.children().children().off("keypress").on("keypress",function(i){if(t.options.sortable&&n(this).data().sortable){var r=i.keyCode||i.which;if(r==13)t.onSort(i)}});if(n(window).off("resize.bootstrap-table"),!this.options.showHeader||this.options.cardView)this.$header.hide(),this.$tableHeader.hide(),this.$tableLoading.css("top",0);else{this.$header.show();this.$tableHeader.show();this.$tableLoading.css("top",this.$header.outerHeight()+1);this.getCaret();n(window).on("resize.bootstrap-table",n.proxy(this.resetWidth,this))}this.$selectAll=this.$header.find('[name="btSelectAll"]');this.$selectAll.off("click").on("click",function(){var i=n(this).prop("checked");t[i?"checkAll":"uncheckAll"]();t.updateSelected()})};t.prototype.initFooter=function(){!this.options.showFooter||this.options.cardView?this.$tableFooter.hide():this.$tableFooter.show()};t.prototype.initData=function(n,t){(this.data=t==="append"?this.data.concat(n):t==="prepend"?[].concat(n).concat(this.data):n||this.options.data,this.options.data=t==="append"?this.options.data.concat(n):t==="prepend"?[].concat(n).concat(this.options.data):this.data,this.options.sidePagination!=="server")&&this.initSort()};t.prototype.initSort=function(){var t=this,o=this.options.sortName,u=this.options.sortOrder==="desc"?-1:1,e=n.inArray(this.options.sortName,this.header.fields),s=0;if(this.options.customSort!==n.noop){this.options.customSort.apply(this,[this.options.sortName,this.options.sortOrder]);return}e!==-1&&(this.options.sortStable&&n.each(this.data,function(n,t){t._position=n}),this.data.sort(function(i,s){t.header.sortNames[e]&&(o=t.header.sortNames[e]);var h=f(i,o,t.options.escape),c=f(s,o,t.options.escape),l=r(t.header,t.header.sorters[e],[h,c]);return l!==undefined?t.options.sortStable&&l===0?i._position-s._position:u*l:((h===undefined||h===null)&&(h=""),(c===undefined||c===null)&&(c=""),t.options.sortStable&&h===c)?(h=i._position,c=s._position,i._position-s._position):n.isNumeric(h)&&n.isNumeric(c)?(h=parseFloat(h),c=parseFloat(c),h<c)?u*-1:u:h===c?0:(typeof h!="string"&&(h=h.toString()),h.localeCompare(c)===-1)?u*-1:u}),this.options.sortClass!==undefined&&(clearTimeout(s),s=setTimeout(function(){t.$el.removeClass(t.options.sortClass);var n=t.$header.find(i('[data-field="%s"]',t.options.sortName).index()+1);t.$el.find(i("tr td:nth-child(%s)",n)).addClass(t.options.sortClass)},250)))};t.prototype.onSort=function(t){var i=t.type==="keypress"?n(t.currentTarget):n(t.currentTarget).parent(),r=this.$header.find("th").eq(i.index());if(this.$header.add(this.$header_).find("span.order").remove(),this.options.sortName===i.data("field")?this.options.sortOrder=this.options.sortOrder==="asc"?"desc":"asc":(this.options.sortName=i.data("field"),this.options.sortOrder=this.options.rememberOrder?i.data("order")==="asc"?"desc":"asc":this.options.columns[0].filter(function(n){return n.field===i.data("field")})[0].order),this.trigger("sort",this.options.sortName,this.options.sortOrder),i.add(r).data("order",this.options.sortOrder),this.getCaret(),this.options.sidePagination==="server"){this.initServer(this.options.silentSort);return}this.initSort();this.initBody()};t.prototype.initToolbar=function(){var u=this,t=[],f=0,e,o,s=0;if(this.$toolbar.find(".bs-bars").children().length&&n("body").append(n(this.options.toolbar)),this.$toolbar.html(""),(typeof this.options.toolbar=="string"||typeof this.options.toolbar=="object")&&n(i('<div class="bs-bars pull-%s"><\/div>',this.options.toolbarAlign)).appendTo(this.$toolbar).append(n(this.options.toolbar)),t=[i('<div class="columns columns-%s btn-group pull-%s">',this.options.buttonsAlign,this.options.buttonsAlign)],typeof this.options.icons=="string"&&(this.options.icons=r(null,this.options.icons)),this.options.showPaginationSwitch&&t.push(i('<button class="btn'+i(" btn-%s",this.options.buttonsClass)+i(" btn-%s",this.options.iconSize)+'" type="button" name="paginationSwitch" aria-label="pagination Switch" title="%s">',this.options.formatPaginationSwitch()),i('<i class="%s %s"><\/i>',this.options.iconsPrefix,this.options.icons.paginationSwitchDown),"<\/button>"),this.options.showRefresh&&t.push(i('<button class="btn'+i(" btn-%s",this.options.buttonsClass)+i(" btn-%s",this.options.iconSize)+'" type="button" name="refresh" aria-label="refresh" title="%s">',this.options.formatRefresh()),i('<i class="%s %s"><\/i>',this.options.iconsPrefix,this.options.icons.refresh),"<\/button>"),this.options.showToggle&&t.push(i('<button class="btn'+i(" btn-%s",this.options.buttonsClass)+i(" btn-%s",this.options.iconSize)+'" type="button" name="toggle" aria-label="toggle" title="%s">',this.options.formatToggle()),i('<i class="%s %s"><\/i>',this.options.iconsPrefix,this.options.icons.toggle),"<\/button>"),this.options.showColumns&&(t.push('<div class="keep-open btn-group">',i('<button type="button" aria-label="columns" title="%s" class="btn',this.options.formatColumns())+i(" btn-%s",this.options.buttonsClass)+i(" btn-%s",this.options.iconSize)+' dropdown-toggle" data-toggle="dropdown">',i('<i class="%s %s"><\/i>',this.options.iconsPrefix,this.options.icons.columns),' <span class="caret"><\/span>',"<\/button>",'<ul class="dropdown-menu" role="menu">'),n.each(this.columns,function(n,r){if(!r.radio&&!r.checkbox&&(!u.options.cardView||r.cardVisible)){var f=r.visible?' checked="checked"':"";r.switchable&&(t.push(i('<li role="menuitem"><label><input type="checkbox" data-field="%s" value="%s"%s> %s<\/label><\/li>',r.field,n,f,r.title)),s++)}}),t.push("<\/ul>","<\/div>")),t.push("<\/div>"),(this.showToolbar||t.length>2)&&this.$toolbar.append(t.join("")),this.options.showPaginationSwitch)this.$toolbar.find('button[name="paginationSwitch"]').off("click").on("click",n.proxy(this.togglePagination,this));if(this.options.showRefresh)this.$toolbar.find('button[name="refresh"]').off("click").on("click",n.proxy(this.refresh,this));if(this.options.showToggle)this.$toolbar.find('button[name="toggle"]').off("click").on("click",function(){u.toggleView()});if(this.options.showColumns){e=this.$toolbar.find(".keep-open");s<=this.options.minimumCountColumns&&e.find("input").prop("disabled",!0);e.find("li").off("click").on("click",function(n){n.stopImmediatePropagation()});e.find("input").off("click").on("click",function(){var t=n(this);u.toggleColumn(n(this).val(),t.prop("checked"),!1);u.trigger("column-switch",n(this).data("field"),t.prop("checked"))})}if(this.options.search){t=[];t.push('<div class="pull-'+this.options.searchAlign+' search">',i('<input class="form-control isTooltip'+i(" input-%s",this.options.iconSize)+'" type="text" placeholder="%s" title="%s">',this.options.formatSearch(),this.options.formatSearch()),"<\/div>");this.$toolbar.append(t.join(""));o=this.$toolbar.find(".search input");o.off("keyup drop blur").on("keyup drop blur",function(t){u.options.searchOnEnterKey&&t.keyCode!==13||n.inArray(t.keyCode,[37,38,39,40])>-1||(clearTimeout(f),f=setTimeout(function(){u.onSearch(t)},u.options.searchTimeOut))});if(l())o.off("mouseup").on("mouseup",function(n){clearTimeout(f);f=setTimeout(function(){u.onSearch(n)},u.options.searchTimeOut)})}};t.prototype.onSearch=function(t){var i=n.trim(n(t.currentTarget).val());(this.options.trimOnSearch&&n(t.currentTarget).val()!==i&&n(t.currentTarget).val(i),i!==this.searchText)&&(this.searchText=i,this.options.searchText=i,this.options.pageNumber=1,this.initSearch(),this.updatePagination(),this.trigger("search",i))};t.prototype.initSearch=function(){var t=this,f,i;if(this.options.sidePagination!=="server"){if(this.options.customSearch!==n.noop){this.options.customSearch.apply(this,[this.searchText]);return}f=this.searchText&&(this.options.escape?u(this.searchText):this.searchText).toLowerCase();i=n.isEmptyObject(this.filterColumns)?null:this.filterColumns;this.data=i?n.grep(this.options.data,function(t){for(var r in i)if(n.isArray(i[r])&&n.inArray(t[r],i[r])===-1||!n.isArray(i[r])&&t[r]!==i[r])return!1;return!0}):this.options.data;this.data=f?n.grep(this.data,function(i,u){for(var s,h,e,l,c,o=0;o<t.header.fields.length;o++)if(t.header.searchables[o]){if(s=n.isNumeric(t.header.fields[o])?parseInt(t.header.fields[o],10):t.header.fields[o],h=t.columns[t.fieldsColumnsIndex[s]],typeof s=="string"){for(e=i,l=s.split("."),c=0;c<l.length;c++)e=e[l[c]];h&&h.searchFormatter&&(e=r(h,t.header.formatters[o],[e,i,u],e))}else e=i[s];if(typeof e=="string"||typeof e=="number")if(t.options.strictSearch){if((e+"").toLowerCase()===f)return!0}else if((e+"").toLowerCase().indexOf(f)!==-1)return!0}return!1}):this.data}};t.prototype.initPagination=function(){var w,h,b;if(this.options.pagination)this.$pagination.show();else{this.$pagination.hide();return}var f=this,t=[],o=!1,s,r,u,a,v,c,l,y,p,k=this.getData(),e=this.options.pageList;if(this.options.sidePagination!=="server"&&(this.options.totalRows=k.length),this.totalPages=0,this.options.totalRows&&(this.options.pageSize===this.options.formatAllRows()?(this.options.pageSize=this.options.totalRows,o=!0):this.options.pageSize===this.options.totalRows&&(w=typeof this.options.pageList=="string"?this.options.pageList.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.pageList,n.inArray(this.options.formatAllRows().toLowerCase(),w)>-1&&(o=!0)),this.totalPages=~~((this.options.totalRows-1)/this.options.pageSize)+1,this.options.totalPages=this.totalPages),this.totalPages>0&&this.options.pageNumber>this.totalPages&&(this.options.pageNumber=this.totalPages),this.pageFrom=(this.options.pageNumber-1)*this.options.pageSize+1,this.pageTo=this.options.pageNumber*this.options.pageSize,this.pageTo>this.options.totalRows&&(this.pageTo=this.options.totalRows),t.push('<div class="pull-'+this.options.paginationDetailHAlign+' pagination-detail">','<span class="pagination-info">',this.options.onlyInfoPagination?this.options.formatDetailPagination(this.options.totalRows):this.options.formatShowingRows(this.pageFrom,this.pageTo,this.options.totalRows),"<\/span>"),!this.options.onlyInfoPagination){for(t.push('<span class="page-list">'),h=[i('<span class="btn-group %s">',this.options.paginationVAlign==="top"||this.options.paginationVAlign==="both"?"dropdown":"dropup"),'<button type="button" class="btn'+i(" btn-%s",this.options.buttonsClass)+i(" btn-%s",this.options.iconSize)+' dropdown-toggle" data-toggle="dropdown">','<span class="page-size">',o?this.options.formatAllRows():this.options.pageSize,"<\/span>",' <span class="caret"><\/span>',"<\/button>",'<ul class="dropdown-menu" role="menu">'],typeof this.options.pageList=="string"&&(b=this.options.pageList.replace("[","").replace("]","").replace(/ /g,"").split(","),e=[],n.each(b,function(n,t){e.push(t.toUpperCase()===f.options.formatAllRows().toUpperCase()?f.options.formatAllRows():+t)})),n.each(e,function(n,t){if(!f.options.smartDisplay||n===0||e[n-1]<f.options.totalRows){var r;r=o?t===f.options.formatAllRows()?' class="active"':"":t===f.options.pageSize?' class="active"':"";h.push(i('<li role="menuitem"%s><a class="dropdown-item" href="javascript:;">%s<\/a><\/li>',r,t))}}),h.push("<\/ul><\/span>"),t.push(this.options.formatRecordsPerPage(h.join(""))),t.push("<\/span>"),t.push("<\/div>",'<div class="pull-'+this.options.paginationHAlign+' pagination">','<ul class="pagination'+i(" pagination-%s",this.options.iconSize)+'">','<li class="page-pre page-item"><a class="page-link" href="javascript;">'+this.options.paginationPreText+"<\/a><\/li>"),this.totalPages<5?(r=1,u=this.totalPages):(r=this.options.pageNumber-2,u=r+4,r<1&&(r=1,u=5),u>this.totalPages&&(u=this.totalPages,r=u-4)),this.totalPages>=6&&(this.options.pageNumber>=3&&(t.push('<li class="page-first page-item'+(1===this.options.pageNumber?" active":"")+'">','<a class="page-link" href="javascript:;">',1,"<\/a>","<\/li>"),r++),this.options.pageNumber>=4&&(this.options.pageNumber==4||this.totalPages==6||this.totalPages==7?r--:t.push('<li class="page-first-separator disabled page-item">','<a class="page-link" href="javascript:;">...<\/a>',"<\/li>"),u--)),this.totalPages>=7&&this.options.pageNumber>=this.totalPages-2&&r--,this.totalPages==6?this.options.pageNumber>=this.totalPages-2&&u++:this.totalPages>=7&&(this.totalPages==7||this.options.pageNumber>=this.totalPages-3)&&u++,s=r;s<=u;s++)t.push('<li class="page-number page-item'+(s===this.options.pageNumber?" active":"")+'">','<a class="page-link" href="javascript:;">',s,"<\/a>","<\/li>");this.totalPages>=8&&this.options.pageNumber<=this.totalPages-4&&t.push('<li class="page-last-separator disabled">','<a class="page-link" class="page-item" href="javascript:;">...<\/a>',"<\/li>");this.totalPages>=6&&this.options.pageNumber<=this.totalPages-3&&t.push('<li class="page-last'+(this.totalPages===this.options.pageNumber?" active":"")+'">','<a class="page-link" href="javascript:;">',this.totalPages,"<\/a>","<\/li>");t.push('<li class="page-next page-item"><a class="page-link" href="javascript:;">'+this.options.paginationNextText+"<\/a><\/li>","<\/ul>","<\/div>")}if(this.$pagination.html(t.join("")),!this.options.onlyInfoPagination){a=this.$pagination.find(".page-list a");v=this.$pagination.find(".page-first");c=this.$pagination.find(".page-pre");l=this.$pagination.find(".page-next");y=this.$pagination.find(".page-last");p=this.$pagination.find(".page-number");this.options.smartDisplay&&(this.totalPages<=1&&this.$pagination.find("div.pagination").hide(),(e.length<2||this.options.totalRows<=e[0])&&this.$pagination.find("span.page-list").hide(),this.$pagination[this.getData().length?"show":"hide"]());this.options.paginationLoop||(this.options.pageNumber===1&&c.addClass("disabled"),this.options.pageNumber===this.totalPages&&l.addClass("disabled"));o&&(this.options.pageSize=this.options.formatAllRows());a.off("click").on("click",n.proxy(this.onPageListChange,this));v.off("click").on("click",n.proxy(this.onPageFirst,this));c.off("click").on("click",n.proxy(this.onPagePre,this));l.off("click").on("click",n.proxy(this.onPageNext,this));y.off("click").on("click",n.proxy(this.onPageLast,this));p.off("click").on("click",n.proxy(this.onPageNumber,this))}};t.prototype.updatePagination=function(t){t&&n(t.currentTarget).hasClass("disabled")||(this.options.maintainSelected||this.resetRows(),this.initPagination(),this.options.sidePagination==="server"?this.initServer():this.initBody(),this.trigger("page-change",this.options.pageNumber,this.options.pageSize))};t.prototype.onPageListChange=function(t){var i=n(t.currentTarget);return i.parent().addClass("active").siblings().removeClass("active"),this.options.pageSize=i.text().toUpperCase()===this.options.formatAllRows().toUpperCase()?this.options.formatAllRows():+i.text(),this.$toolbar.find(".page-size").text(this.options.pageSize),this.updatePagination(t),!1};t.prototype.onPageFirst=function(n){return this.options.pageNumber=1,this.updatePagination(n),!1};t.prototype.onPagePre=function(n){return this.options.pageNumber-1==0?this.options.pageNumber=this.options.totalPages:this.options.pageNumber--,this.updatePagination(n),!1};t.prototype.onPageNext=function(n){return this.options.pageNumber+1>this.options.totalPages?this.options.pageNumber=1:this.options.pageNumber++,this.updatePagination(n),!1};t.prototype.onPageLast=function(n){return this.options.pageNumber=this.totalPages,this.updatePagination(n),!1};t.prototype.onPageNumber=function(t){if(this.options.pageNumber!==+n(t.currentTarget).text())return this.options.pageNumber=+n(t.currentTarget).text(),this.updatePagination(t),!1};t.prototype.initRow=function(t,e){var o=this,c,h=[],s={},v=[],y="",l={},p=[];if(!(n.inArray(t,this.hiddenRows)>-1)){if(s=r(this.options,this.options.rowStyle,[t,e],s),s&&s.css)for(c in s.css)v.push(c+": "+s.css[c]);if(l=r(this.options,this.options.rowAttributes,[t,e],l),l)for(c in l)p.push(i('%s="%s"',c,u(l[c])));return t._data&&!n.isEmptyObject(t._data)&&n.each(t._data,function(n,t){n!=="index"&&(y+=i(' data-%s="%s"',n,t))}),h.push("<tr",i(" %s",p.join(" ")),i(' id="%s"',n.isArray(t)?undefined:t._id),i(' class="%s"',s.classes||(n.isArray(t)?undefined:t._class)),i(' data-index="%s"',e),i(' data-uniqueid="%s"',t[this.options.uniqueId]),i("%s",y),">"),this.options.cardView&&h.push(i('<td colspan="%s"><div class="card-views">',this.header.fields.length)),!this.options.cardView&&this.options.detailView&&(h.push("<td>"),r(null,this.options.detailFilter,[e,t])&&h.push('<a class="detail-icon" href="javascript:">',i('<i class="%s %s"><\/i>',this.options.iconsPrefix,this.options.icons.detailOpen),"<\/a>"),h.push("<\/td>")),n.each(this.header.fields,function(c,l){var d="",w=f(t,l,o.options.escape),y="",k="",b={},it="",g=o.header.classes[c],rt="",ut="",ft="",et="",p=o.columns[c],nt,tt;if((!o.fromHtml||typeof w!="undefined"||p.checkbox||p.radio)&&p.visible&&(!o.options.cardView||p.cardVisible)){if(p.escape&&(w=u(w)),s=i('style="%s"',v.concat(o.header.styles[c]).join("; ")),t["_"+l+"_id"]&&(it=i(' id="%s"',t["_"+l+"_id"])),t["_"+l+"_class"]&&(g=i(' class="%s"',t["_"+l+"_class"])),t["_"+l+"_rowspan"]&&(ut=i(' rowspan="%s"',t["_"+l+"_rowspan"])),t["_"+l+"_colspan"]&&(ft=i(' colspan="%s"',t["_"+l+"_colspan"])),t["_"+l+"_title"]&&(et=i(' title="%s"',t["_"+l+"_title"])),b=r(o.header,o.header.cellStyles[c],[w,t,e,l],b),b.classes&&(g=i(' class="%s"',b.classes)),b.css){nt=[];for(tt in b.css)nt.push(tt+": "+b.css[tt]);s=i('style="%s"',nt.concat(o.header.styles[c]).join("; "))}y=r(p,o.header.formatters[c],[w,t,e],w);t["_"+l+"_data"]&&!n.isEmptyObject(t["_"+l+"_data"])&&n.each(t["_"+l+"_data"],function(n,t){n!=="index"&&(rt+=i(' data-%s="%s"',n,t))});p.checkbox||p.radio?(k=p.checkbox?"checkbox":k,k=p.radio?"radio":k,d=[i(o.options.cardView?'<div class="card-view %s">':'<td class="bs-checkbox %s">',p["class"]||""),"<input"+i(' data-index="%s"',e)+i(' name="%s"',o.options.selectItemName)+i(' type="%s"',k)+i(' value="%s"',t[o.options.idField])+i(' checked="%s"',y===!0||w||y&&y.checked?"checked":undefined)+i(' disabled="%s"',!p.checkboxEnabled||y&&y.disabled?"disabled":undefined)+" />",o.header.formatters[c]&&typeof y=="string"?y:"",o.options.cardView?"<\/div>":"<\/td>"].join(""),t[o.header.stateField]=y===!0||y&&y.checked):(y=typeof y=="undefined"||y===null?o.options.undefinedText:y,d=o.options.cardView?['<div class="card-view">',o.options.showHeader?i('<span class="title" %s>%s<\/span>',s,a(o.columns,"field","title",l)):"",i('<span class="value">%s<\/span>',y),"<\/div>"].join(""):[i("<td%s %s %s %s %s %s %s>",it,g,s,rt,ut,ft,et),y,"<\/td>"].join(""),o.options.cardView&&o.options.smartDisplay&&y===""&&(d='<div class="card-view"><\/div>'));h.push(d)}}),this.options.cardView&&h.push("<\/div><\/td>"),h.push("<\/tr>"),h.join(" ")}};t.prototype.initBody=function(t){var u=this,e=this.getData(),o,c,s,l,h;for(this.trigger("pre-body",e),this.$body=this.$el.find(">tbody"),this.$body.length||(this.$body=n("<tbody><\/tbody>").appendTo(this.$el)),this.options.pagination&&this.options.sidePagination!=="server"||(this.pageFrom=1,this.pageTo=e.length),o=n(document.createDocumentFragment()),s=this.pageFrom-1;s<this.pageTo;s++)l=e[s],h=this.initRow(l,s,e,o),c=c||!!h,h&&h!==!0&&o.append(h);c||o.append('<tr class="no-records-found">'+i('<td colspan="%s">%s<\/td>',this.$header.find("th").length,this.options.formatNoMatches())+"<\/tr>");this.$body.html(o);t||this.scrollTo(0);this.$body.find("> tr[data-index] > td").off("click dblclick").on("click dblclick",function(t){var r=n(this),o=r.parent(),s=u.data[o.data("index")],c=r[0].cellIndex,l=u.getVisibleFields(),e=l[u.options.detailView&&!u.options.cardView?c-1:c],a=u.columns[u.fieldsColumnsIndex[e]],v=f(s,e,u.options.escape),h;r.find(".detail-icon").length||(u.trigger(t.type==="click"?"click-cell":"dbl-click-cell",e,v,s,r),u.trigger(t.type==="click"?"click-row":"dbl-click-row",s,o,e),t.type==="click"&&u.options.clickToSelect&&a.clickToSelect&&(h=o.find(i('[name="%s"]',u.options.selectItemName)),h.length&&h[0].click()))});this.$body.find("> tr[data-index] > td > .detail-icon").off("click").on("click",function(){var s=n(this),t=s.parent().parent(),o=t.data("index"),h=e[o],f,c;return t.next().is("tr.detail-view")?(s.find("i").attr("class",i("%s %s",u.options.iconsPrefix,u.options.icons.detailOpen)),u.trigger("collapse-row",o,h),t.next().remove()):(s.find("i").attr("class",i("%s %s",u.options.iconsPrefix,u.options.icons.detailClose)),t.after(i('<tr class="detail-view"><td colspan="%s"><\/td><\/tr>',t.find("td").length)),f=t.next().find("td"),c=r(u.options,u.options.detailFormatter,[o,h,f],""),f.length===1&&f.append(c),u.trigger("expand-row",o,h,f)),u.resetView(),!1});this.$selectItem=this.$body.find(i('[name="%s"]',this.options.selectItemName));this.$selectItem.off("click").on("click",function(t){t.stopImmediatePropagation();var i=n(this),r=i.prop("checked"),f=u.data[i.data("index")];u.options.maintainSelected&&n(this).is(":radio")&&n.each(u.options.data,function(n,t){t[u.header.stateField]=!1});f[u.header.stateField]=r;u.options.singleSelect&&(u.$selectItem.not(this).each(function(){u.data[n(this).data("index")][u.header.stateField]=!1}),u.$selectItem.filter(":checked").not(this).prop("checked",!1));u.updateSelected();u.trigger(r?"check":"uncheck",f,i)});n.each(this.header.events,function(t,i){var e,o,f;if(i){typeof i=="string"&&(i=r(null,i));e=u.header.fields[t];o=n.inArray(e,u.getVisibleFields());u.options.detailView&&!u.options.cardView&&(o+=1);for(f in i)u.$body.find(">tr:not(.no-records-found)").each(function(){var t=n(this),h=t.find(u.options.cardView?".card-view":"td").eq(o),r=f.indexOf(" "),s=f.substring(0,r),c=f.substring(r+1),l=i[f];h.find(c).off(s).on(s,function(n){var i=t.data("index"),r=u.data[i],f=r[e];l.apply(this,[n,f,r,i])})})}});this.updateSelected();this.resetView();this.trigger("post-body",e)};t.prototype.initServer=function(t,i,u){var e=this,o={},f={searchText:this.searchText,sortName:this.options.sortName,sortOrder:this.options.sortOrder},s;(this.options.pagination&&(f.pageSize=this.options.pageSize===this.options.formatAllRows()?this.options.totalRows:this.options.pageSize,f.pageNumber=this.options.pageNumber),u||this.options.url||this.options.ajax)&&(this.options.queryParamsType==="limit"&&(f={search:f.searchText,sort:f.sortName,order:f.sortOrder},this.options.pagination&&(f.offset=this.options.pageSize===this.options.formatAllRows()?0:this.options.pageSize*(this.options.pageNumber-1),f.limit=this.options.pageSize===this.options.formatAllRows()?this.options.totalRows:this.options.pageSize)),n.isEmptyObject(this.filterColumnsPartial)||(f.filter=JSON.stringify(this.filterColumnsPartial,null)),o=r(this.options,this.options.queryParams,[f],o),n.extend(o,i||{}),o!==!1)&&(t||this.$tableLoading.show(),s=n.extend({},r(null,this.options.ajaxOptions),{type:this.options.method,url:u||this.options.url,data:this.options.contentType==="application/json"&&this.options.method==="post"?JSON.stringify(o):o,cache:this.options.cache,contentType:this.options.contentType,dataType:this.options.dataType,success:function(n){n=r(e.options,e.options.responseHandler,[n],n);e.load(n);e.trigger("load-success",n);t||e.$tableLoading.hide()},error:function(n){e.trigger("load-error",n.status,n);t||e.$tableLoading.hide()}}),this.options.ajax?r(this,this.options.ajax,[s],null):(this._xhr&&this._xhr.readyState!==4&&this._xhr.abort(),this._xhr=n.ajax(s)))};t.prototype.initSearchText=function(){if(this.options.search&&this.options.searchText!==""){var n=this.$toolbar.find(".search input");n.val(this.options.searchText);this.onSearch({currentTarget:n})}};t.prototype.getCaret=function(){var t=this;n.each(this.$header.find("th"),function(i,r){n(r).find(".sortable").removeClass("desc asc").addClass(n(r).data("field")===t.options.sortName?t.options.sortOrder:"both")})};t.prototype.updateSelected=function(){var t=this.$selectItem.filter(":enabled").length&&this.$selectItem.filter(":enabled").length===this.$selectItem.filter(":enabled").filter(":checked").length;this.$selectAll.add(this.$selectAll_).prop("checked",t);this.$selectItem.each(function(){n(this).closest("tr")[n(this).prop("checked")?"addClass":"removeClass"]("selected")})};t.prototype.updateRows=function(){var t=this;this.$selectItem.each(function(){t.data[n(this).data("index")][t.header.stateField]=n(this).prop("checked")})};t.prototype.resetRows=function(){var t=this;n.each(this.data,function(n,i){t.$selectAll.prop("checked",!1);t.$selectItem.prop("checked",!1);t.header.stateField&&(i[t.header.stateField]=!1)});this.initHiddenRows()};t.prototype.trigger=function(i){var r=Array.prototype.slice.call(arguments,1);i+=".bs.table";this.options[t.EVENTS[i]].apply(this.options,r);this.$el.trigger(n.Event(i),r);this.options.onAll(i,r);this.$el.trigger(n.Event("all.bs.table"),[i,r])};t.prototype.resetHeader=function(){clearTimeout(this.timeoutId_);this.timeoutId_=setTimeout(n.proxy(this.fitHeader,this),this.$el.is(":hidden")?100:0)};t.prototype.fitHeader=function(){var t=this,r,c,u,f,e,o,h,l,a;if(t.$el.is(":hidden")){t.timeoutId_=setTimeout(n.proxy(t.fitHeader,t),100);return}r=this.$tableBody.get(0);c=r.scrollWidth>r.clientWidth&&r.scrollHeight>r.clientHeight+this.$header.outerHeight()?s():0;this.$el.css("margin-top",-this.$header.outerHeight());u=n(":focus");u.length>0&&(e=u.parents("th"),e.length>0&&(o=e.attr("data-field"),o!==undefined&&(h=this.$header.find("[data-field='"+o+"']"),h.length>0&&h.find(":input").addClass("focus-temp"))));this.$header_=this.$header.clone(!0,!0);this.$selectAll_=this.$header_.find('[name="btSelectAll"]');this.$tableHeader.css({"margin-right":c}).find("table").css("width",this.$el.outerWidth()).html("").attr("class",this.$el.attr("class")).append(this.$header_);f=n(".focus-temp:visible:eq(0)");f.length>0&&(f.focus(),this.$header.find(".focus-temp").removeClass("focus-temp"));this.$header.find("th[data-field]").each(function(){t.$header_.find(i('th[data-field="%s"]',n(this).data("field"))).data(n(this).data())});l=this.getVisibleFields();a=this.$header_.find("th");this.$body.find(">tr:first-child:not(.no-records-found) > *").each(function(r){var f=n(this),e=r,u;t.options.detailView&&!t.options.cardView&&(r===0&&t.$header_.find("th.detail").find(".fht-cell").width(f.innerWidth()),e=r-1);u=t.$header_.find(i('th[data-field="%s"]',l[e]));u.length>1&&(u=n(a[f[0].cellIndex]));u.find(".fht-cell").width(f.innerWidth())});this.horizontalScroll();this.trigger("post-header")};t.prototype.resetFooter=function(){var u=this,f=u.getData(),t=[];this.options.showFooter&&!this.options.cardView&&(!this.options.cardView&&this.options.detailView&&t.push('<td><div class="th-inner">&nbsp;<\/div><div class="fht-cell"><\/div><\/td>'),n.each(this.columns,function(n,e){var s,h="",c="",l=[],o={},a=i(' class="%s"',e["class"]);if(e.visible&&(!u.options.cardView||e.cardVisible)){if(h=i("text-align: %s; ",e.falign?e.falign:e.align),c=i("vertical-align: %s; ",e.valign),o=r(null,u.options.footerStyle),o&&o.css)for(s in o.css)l.push(s+": "+o.css[s]);t.push("<td",a,i(' style="%s"',h+c+l.concat().join("; ")),">");t.push('<div class="th-inner">');t.push(r(e,e.footerFormatter,[f],"&nbsp;")||"&nbsp;");t.push("<\/div>");t.push('<div class="fht-cell"><\/div>');t.push("<\/div>");t.push("<\/td>")}}),this.$tableFooter.find("tr").html(t.join("")),this.$tableFooter.show(),clearTimeout(this.timeoutFooter_),this.timeoutFooter_=setTimeout(n.proxy(this.fitFooter,this),this.$el.is(":hidden")?100:0))};t.prototype.fitFooter=function(){var u=this,i,t,r;if(clearTimeout(this.timeoutFooter_),this.$el.is(":hidden")){this.timeoutFooter_=setTimeout(n.proxy(this.fitFooter,this),100);return}t=this.$el.css("width");r=t>this.$tableBody.width()?s():0;this.$tableFooter.css({"margin-right":r}).find("table").css("width",t).attr("class",this.$el.attr("class"));i=this.$tableFooter.find("td");this.$body.find(">tr:first-child:not(.no-records-found) > *").each(function(t){var r=n(this);i.eq(t).find(".fht-cell").width(r.innerWidth())});this.horizontalScroll()};t.prototype.horizontalScroll=function(){var t=this;this.$tableBody.off("scroll").on("scroll",function(){t.options.showHeader&&t.options.height&&t.$tableHeader.scrollLeft(n(this).scrollLeft());t.options.showFooter&&!t.options.cardView&&t.$tableFooter.scrollLeft(n(this).scrollLeft())})};t.prototype.toggleColumn=function(n,t,r){if(n!==-1&&(this.columns[n].visible=t,this.initHeader(),this.initSearch(),this.initPagination(),this.initBody(),this.options.showColumns)){var u=this.$toolbar.find(".keep-open input").prop("disabled",!1);r&&u.filter(i('[value="%s"]',n)).prop("checked",t);u.filter(":checked").length<=this.options.minimumCountColumns&&u.filter(":checked").prop("disabled",!0)}};t.prototype.getVisibleFields=function(){var t=this,i=[];return n.each(this.header.fields,function(n,r){var u=t.columns[t.fieldsColumnsIndex[r]];u.visible&&i.push(r)}),i};t.prototype.resetView=function(n){var t=0;if(n&&n.height&&(this.options.height=n.height),this.$selectAll.prop("checked",this.$selectItem.length>0&&this.$selectItem.length===this.$selectItem.filter(":checked").length),this.options.height){var i=this.$toolbar.outerHeight(!0),r=this.$pagination.outerHeight(!0),u=this.options.height-i-r;this.$tableContainer.css("height",u+"px")}if(this.options.cardView){this.$el.css("margin-top","0");this.$tableContainer.css("padding-bottom","0");this.$tableFooter.hide();return}this.options.showHeader&&this.options.height?(this.$tableHeader.show(),this.resetHeader(),t+=this.$header.outerHeight()):(this.$tableHeader.hide(),this.trigger("post-header"));this.options.showFooter&&(this.resetFooter(),this.options.height&&(t+=this.$tableFooter.outerHeight()+1));this.getCaret();this.$tableContainer.css("padding-bottom",t+"px");this.trigger("reset-view")};t.prototype.getData=function(t){return this.searchText||!n.isEmptyObject(this.filterColumns)||!n.isEmptyObject(this.filterColumnsPartial)?t?this.data.slice(this.pageFrom-1,this.pageTo):this.data:t?this.options.data.slice(this.pageFrom-1,this.pageTo):this.options.data};t.prototype.load=function(t){var i=!1;this.options.sidePagination==="server"?(this.options.totalRows=t[this.options.totalField],i=t.fixedScroll,t=t[this.options.dataField]):n.isArray(t)||(i=t.fixedScroll,t=t.data);this.initData(t);this.initSearch();this.initPagination();this.initBody(i)};t.prototype.append=function(n){this.initData(n,"append");this.initSearch();this.initPagination();this.initSort();this.initBody(!0)};t.prototype.prepend=function(n){this.initData(n,"prepend");this.initSearch();this.initPagination();this.initSort();this.initBody(!0)};t.prototype.remove=function(t){var u=this.options.data.length,i,r;if(t.hasOwnProperty("field")&&t.hasOwnProperty("values")){for(i=u-1;i>=0;i--)(r=this.options.data[i],r.hasOwnProperty(t.field))&&n.inArray(r[t.field],t.values)!==-1&&(this.options.data.splice(i,1),this.options.sidePagination==="server"&&(this.options.totalRows-=1));u!==this.options.data.length&&(this.initSearch(),this.initPagination(),this.initSort(),this.initBody(!0))}};t.prototype.removeAll=function(){this.options.data.length>0&&(this.options.data.splice(0,this.options.data.length),this.initSearch(),this.initPagination(),this.initBody(!0))};t.prototype.getRowByUniqueId=function(n){for(var r=this.options.uniqueId,e=this.options.data.length,f=null,i,t,u=e-1;u>=0;u--){if(i=this.options.data[u],i.hasOwnProperty(r))t=i[r];else if(i._data.hasOwnProperty(r))t=i._data[r];else continue;if(typeof t=="string"?n=n.toString():typeof t=="number"&&(Number(t)===t&&t%1==0?n=parseInt(n):t===Number(t)&&t!==0&&(n=parseFloat(n))),t===n){f=i;break}}return f};t.prototype.removeByUniqueId=function(n){var i=this.options.data.length,t=this.getRowByUniqueId(n);(t&&this.options.data.splice(this.options.data.indexOf(t),1),i!==this.options.data.length)&&(this.initSearch(),this.initPagination(),this.initBody(!0))};t.prototype.updateByUniqueId=function(t){var i=this,r=n.isArray(t)?t:[t];n.each(r,function(t,r){var u;r.hasOwnProperty("id")&&r.hasOwnProperty("row")&&(u=n.inArray(i.getRowByUniqueId(r.id),i.options.data),u!==-1)&&n.extend(i.options.data[u],r.row)});this.initSearch();this.initPagination();this.initSort();this.initBody(!0)};t.prototype.insertRow=function(n){n.hasOwnProperty("index")&&n.hasOwnProperty("row")&&(this.options.data.splice(n.index,0,n.row),this.initSearch(),this.initPagination(),this.initSort(),this.initBody(!0))};t.prototype.updateRow=function(t){var i=this,r=n.isArray(t)?t:[t];n.each(r,function(t,r){r.hasOwnProperty("index")&&r.hasOwnProperty("row")&&n.extend(i.options.data[r.index],r.row)});this.initSearch();this.initPagination();this.initSort();this.initBody(!0)};t.prototype.initHiddenRows=function(){this.hiddenRows=[]};t.prototype.showRow=function(n){this.toggleRow(n,!0)};t.prototype.hideRow=function(n){this.toggleRow(n,!1)};t.prototype.toggleRow=function(t,i){var r,u;(t.hasOwnProperty("index")?r=this.getData()[t.index]:t.hasOwnProperty("uniqueId")&&(r=this.getRowByUniqueId(t.uniqueId)),r)&&(u=n.inArray(r,this.hiddenRows),i||u!==-1?i&&u>-1&&this.hiddenRows.splice(u,1):this.hiddenRows.push(r),this.initBody(!0))};t.prototype.getHiddenRows=function(){var i=this,r=this.getData(),t=[];return n.each(r,function(r,u){n.inArray(u,i.hiddenRows)>-1&&t.push(u)}),this.hiddenRows=t,t};t.prototype.mergeCells=function(t){var i=t.index,r=n.inArray(t.field,this.getVisibleFields()),e=t.rowspan||1,o=t.colspan||1,u,f,s=this.$body.find(">tr"),h;if(this.options.detailView&&!this.options.cardView&&(r+=1),h=s.eq(i).find(">td").eq(r),!(i<0)&&!(r<0)&&!(i>=this.data.length)){for(u=i;u<i+e;u++)for(f=r;f<r+o;f++)s.eq(u).find(">td").eq(f).hide();h.attr("rowspan",e).attr("colspan",o).show()}};t.prototype.updateCell=function(n){n.hasOwnProperty("index")&&n.hasOwnProperty("field")&&n.hasOwnProperty("value")&&(this.data[n.index][n.field]=n.value,n.reinit!==!1)&&(this.initSort(),this.initBody(!0))};t.prototype.getOptions=function(){return this.options};t.prototype.getSelections=function(){var t=this;return n.grep(this.options.data,function(n){return n[t.header.stateField]===!0})};t.prototype.getAllSelections=function(){var t=this;return n.grep(this.options.data,function(n){return n[t.header.stateField]})};t.prototype.checkAll=function(){this.checkAll_(!0)};t.prototype.uncheckAll=function(){this.checkAll_(!1)};t.prototype.checkInvert=function(){var t=this,r=t.$selectItem.filter(":enabled"),i=r.filter(":checked");r.each(function(){n(this).prop("checked",!n(this).prop("checked"))});t.updateRows();t.updateSelected();t.trigger("uncheck-some",i);i=t.getSelections();t.trigger("check-some",i)};t.prototype.checkAll_=function(n){var t;n||(t=this.getSelections());this.$selectAll.add(this.$selectAll_).prop("checked",n);this.$selectItem.filter(":enabled").prop("checked",n);this.updateRows();n&&(t=this.getSelections());this.trigger(n?"check-all":"uncheck-all",t)};t.prototype.check=function(n){this.check_(!0,n)};t.prototype.uncheck=function(n){this.check_(!1,n)};t.prototype.check_=function(n,t){var r=this.$selectItem.filter(i('[data-index="%s"]',t)).prop("checked",n);this.data[t][this.header.stateField]=n;this.updateSelected();this.trigger(n?"check":"uncheck",this.data[t],r)};t.prototype.checkBy=function(n){this.checkBy_(!0,n)};t.prototype.uncheckBy=function(n){this.checkBy_(!1,n)};t.prototype.checkBy_=function(t,r){if(r.hasOwnProperty("field")&&r.hasOwnProperty("values")){var u=this,f=[];n.each(this.options.data,function(e,o){if(!o.hasOwnProperty(r.field))return!1;if(n.inArray(o[r.field],r.values)!==-1){var s=u.$selectItem.filter(":enabled").filter(i('[data-index="%s"]',e)).prop("checked",t);o[u.header.stateField]=t;f.push(o);u.trigger(t?"check":"uncheck",o,s)}});this.updateSelected();this.trigger(t?"check-some":"uncheck-some",f)}};t.prototype.destroy=function(){this.$el.insertBefore(this.$container);n(this.options.toolbar).insertBefore(this.$el);this.$container.next().remove();this.$container.remove();this.$el.html(this.$el_.html()).css("margin-top","0").attr("class",this.$el_.attr("class")||"")};t.prototype.showLoading=function(){this.$tableLoading.show()};t.prototype.hideLoading=function(){this.$tableLoading.hide()};t.prototype.togglePagination=function(){this.options.pagination=!this.options.pagination;var n=this.$toolbar.find('button[name="paginationSwitch"] i');this.options.pagination?n.attr("class",this.options.iconsPrefix+" "+this.options.icons.paginationSwitchDown):n.attr("class",this.options.iconsPrefix+" "+this.options.icons.paginationSwitchUp);this.updatePagination()};t.prototype.refresh=function(n){n&&n.url&&(this.options.url=n.url);n&&n.pageNumber&&(this.options.pageNumber=n.pageNumber);n&&n.pageSize&&(this.options.pageSize=n.pageSize);this.initServer(n&&n.silent,n&&n.query,n&&n.url);this.trigger("refresh",n)};t.prototype.resetWidth=function(){this.options.showHeader&&this.options.height&&this.fitHeader();this.options.showFooter&&!that.options.cardView&&this.fitFooter()};t.prototype.showColumn=function(n){this.toggleColumn(this.fieldsColumnsIndex[n],!0,!0)};t.prototype.hideColumn=function(n){this.toggleColumn(this.fieldsColumnsIndex[n],!1,!0)};t.prototype.getHiddenColumns=function(){return n.grep(this.columns,function(n){return!n.visible})};t.prototype.getVisibleColumns=function(){return n.grep(this.columns,function(n){return n.visible})};t.prototype.toggleAllColumns=function(t){if(n.each(this.columns,function(n){this.columns[n].visible=t}),this.initHeader(),this.initSearch(),this.initPagination(),this.initBody(),this.options.showColumns){var i=this.$toolbar.find(".keep-open input").prop("disabled",!1);i.filter(":checked").length<=this.options.minimumCountColumns&&i.filter(":checked").prop("disabled",!0)}};t.prototype.showAllColumns=function(){this.toggleAllColumns(!0)};t.prototype.hideAllColumns=function(){this.toggleAllColumns(!1)};t.prototype.filterBy=function(t){this.filterColumns=n.isEmptyObject(t)?{}:t;this.options.pageNumber=1;this.initSearch();this.updatePagination()};t.prototype.scrollTo=function(n){return typeof n=="string"&&(n=n==="bottom"?this.$tableBody[0].scrollHeight:0),typeof n=="number"&&this.$tableBody.scrollTop(n),typeof n=="undefined"?this.$tableBody.scrollTop():void 0};t.prototype.getScrollPosition=function(){return this.scrollTo()};t.prototype.selectPage=function(n){n>0&&n<=this.options.totalPages&&(this.options.pageNumber=n,this.updatePagination())};t.prototype.prevPage=function(){this.options.pageNumber>1&&(this.options.pageNumber--,this.updatePagination())};t.prototype.nextPage=function(){this.options.pageNumber<this.options.totalPages&&(this.options.pageNumber++,this.updatePagination())};t.prototype.toggleView=function(){this.options.cardView=!this.options.cardView;this.initHeader();this.initBody();this.trigger("toggle",this.options.cardView)};t.prototype.refreshOptions=function(t){h(this.options,t,!0)||(this.options=n.extend(this.options,t),this.trigger("refresh-options",this.options),this.destroy(),this.init())};t.prototype.resetSearch=function(n){var t=this.$toolbar.find(".search input");t.val(n||"");this.onSearch({currentTarget:t})};t.prototype.expandRow_=function(n,t){var r=this.$body.find(i('> tr[data-index="%s"]',t));r.next().is("tr.detail-view")===(n?!1:!0)&&r.find("> td > .detail-icon").click()};t.prototype.expandRow=function(n){this.expandRow_(!0,n)};t.prototype.collapseRow=function(n){this.expandRow_(!1,n)};t.prototype.expandAllRows=function(t){var s,u;if(t){var r=this.$body.find(i('> tr[data-index="%s"]',0)),h=this,f=null,e=!1,o=-1;if(r.next().is("tr.detail-view")?r.next().next().is("tr.detail-view")||(r.next().find(".detail-icon").click(),e=!0):(r.find("> td > .detail-icon").click(),e=!0),e)try{o=setInterval(function(){f=h.$body.find("tr.detail-view").last().find(".detail-icon");f.length>0?f.click():clearInterval(o)},1)}catch(c){clearInterval(o)}}else for(s=this.$body.children(),u=0;u<s.length;u++)this.expandRow_(!0,n(s[u]).data("index"))};t.prototype.collapseAllRows=function(t){var r,i;if(t)this.expandRow_(!1,0);else for(r=this.$body.children(),i=0;i<r.length;i++)this.expandRow_(!1,n(r[i]).data("index"))};t.prototype.updateFormatText=function(n,t){this.options[i("format%s",n)]&&(typeof t=="string"?this.options[i("format%s",n)]=function(){return t}:typeof t=="function"&&(this.options[i("format%s",n)]=t));this.initToolbar();this.initPagination();this.initBody()};o=["getOptions","getSelections","getAllSelections","getData","load","append","prepend","remove","removeAll","insertRow","updateRow","updateCell","updateByUniqueId","removeByUniqueId","getRowByUniqueId","showRow","hideRow","getHiddenRows","mergeCells","checkAll","uncheckAll","checkInvert","check","uncheck","checkBy","uncheckBy","refresh","resetView","resetWidth","destroy","showLoading","hideLoading","showColumn","hideColumn","getHiddenColumns","getVisibleColumns","showAllColumns","hideAllColumns","filterBy","scrollTo","getScrollPosition","selectPage","prevPage","nextPage","togglePagination","toggleView","refreshOptions","resetSearch","expandRow","collapseRow","expandAllRows","collapseAllRows","updateFormatText"];n.fn.bootstrapTable=function(i){var r,u=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=n(this),f=e.data("bootstrap.table"),s=n.extend({},t.DEFAULTS,e.data(),typeof i=="object"&&i);if(typeof i=="string"){if(n.inArray(i,o)<0)throw new Error("Unknown method: "+i);if(!f)return;r=f[i].apply(f,u);i==="destroy"&&e.removeData("bootstrap.table")}f||e.data("bootstrap.table",f=new t(this,s))}),typeof r=="undefined"?this:r};n.fn.bootstrapTable.Constructor=t;n.fn.bootstrapTable.defaults=t.DEFAULTS;n.fn.bootstrapTable.columnDefaults=t.COLUMN_DEFAULTS;n.fn.bootstrapTable.locales=t.LOCALES;n.fn.bootstrapTable.methods=o;n.fn.bootstrapTable.utils={sprintf:i,compareObjects:h,calculateObjectValue:r,getItemField:f,objectKeys:y,isIEBrowser:l};n(function(){n('[data-toggle="table"]').bootstrapTable()})})(jQuery),function(n){"use strict";var t=n.fn.bootstrapTable.utils.sprintf,r={json:"JSON",xml:"XML",png:"PNG",csv:"CSV",txt:"TXT",sql:"SQL",doc:"MS-Word",excel:"MS-Excel",xlsx:"MS-Excel (OpenXML)",powerpoint:"MS-Powerpoint",pdf:"PDF"},i,u;n.extend(n.fn.bootstrapTable.defaults,{showExport:!1,exportDataType:"basic",exportTypes:["json","xml","csv","txt","sql","excel"],exportOptions:{}});n.extend(n.fn.bootstrapTable.defaults.icons,{"export":"fa-share-square-o"});n.extend(n.fn.bootstrapTable.locales,{formatExport:function(){return"Export data"}});n.extend(n.fn.bootstrapTable.defaults,n.fn.bootstrapTable.locales);i=n.fn.bootstrapTable.Constructor;u=i.prototype.initToolbar;i.prototype.initToolbar=function(){var o,f,h;if(this.showToolbar=this.options.showExport,u.apply(this,Array.prototype.slice.apply(arguments)),this.options.showExport){var i=this,s=this.$toolbar.find(">.btn-group"),e=s.find("div.export");e.length||(e=n(['<div class="export btn-group">','<button class="btn'+t(" btn-%s",this.options.buttonsClass)+t(" btn-%s",this.options.iconSize)+' dropdown-toggle" aria-label="export type" title="'+this.options.formatExport()+'" data-toggle="dropdown" type="button">',t('<i class="%s %s"><\/i> ',this.options.iconsPrefix,this.options.icons.export),'<span class="caret"><\/span>',"<\/button>",'<div class="dropdown-menu" role="menu">',"<\/div>","<\/div>"].join("")).appendTo(s),o=e.find(".dropdown-menu"),f=this.options.exportTypes,typeof this.options.exportTypes=="string"&&(h=this.options.exportTypes.slice(1,-1).replace(/ /g,"").split(","),f=[],n.each(h,function(n,t){f.push(t.slice(1,-1))})),n.each(f,function(n,t){r.hasOwnProperty(t)&&o.append(['<a href="javascript:void(0)" class="dropdown-item" role="menuitem" data-type="'+t+'">',r[t],"<\/a>"].join(""))}),o.find("a").click(function(){var f=n(this).data("type"),u=function(){var u;if(!!i.options.exportFooter){var e=i.getData(),o=i.$tableFooter.find("tr").first(),t={},r=[];n.each(o.children(),function(u,f){var e=n(f).children(".th-inner").first().html();t[i.columns[u].field]=e=="&nbsp;"?null:e;r.push(e)});i.append(t);u=i.$body.children().last();n.each(u.children(),function(t,i){n(i).html(r[t])})}i.$el.tableExport(n.extend({},i.options.exportOptions,{type:f,escape:!1}));!i.options.exportFooter||i.load(e)},t,r;if(i.options.exportDataType==="all"&&i.options.pagination){i.$el.one(i.options.sidePagination==="server"?"post-body.bs.table":"page-change.bs.table",function(){u();i.togglePagination()});i.togglePagination()}else i.options.exportDataType==="selected"?(t=i.getData(),r=i.getAllSelections(),i.options.sidePagination==="server"&&(t={total:i.options.totalRows},t[i.options.dataField]=i.getData(),r={total:i.options.totalRows},r[i.options.dataField]=i.getAllSelections()),i.load(r),u(),i.load(t)):u()}))}}}(jQuery);
/**
 * @preserve tableExport.jquery.plugin
 *
 * Copyright (c) 2015-2017 hhurz, https://github.com/hhurz/tableExport.jquery.plugin
 * Original work Copyright (c) 2014 Giri Raj, https://github.com/kayalshri/
 *
 * Licensed under the MIT License, http://opensource.org/licenses/mit-license
 */
(function(n){n.fn.extend({tableExport:function(t){function ii(t){var i=[];return n(t).find("thead").first().find("th").each(function(t,r){i[t]=n(r).attr("data-field")!==undefined?n(r).attr("data-field"):t.toString()}),i}function gi(t,r){var u=!1;return i.ignoreColumn.length>0&&(typeof i.ignoreColumn[0]=="string"?it.length>r&&typeof it[r]!="undefined"&&n.inArray(it[r],i.ignoreColumn)!=-1&&(u=!0):typeof i.ignoreColumn[0]=="number"&&(n.inArray(r,i.ignoreColumn)!=-1||n.inArray(r-t.length,i.ignoreColumn)!=-1)&&(u=!0)),u}function v(t,r,u,f,e){var o;if(n.inArray(u,i.ignoreRow)==-1&&n.inArray(u-f,i.ignoreRow)==-1){var h=n(t).filter(function(){return n(this).data("tableexport-display")!="none"&&(n(this).is(":visible")||n(this).data("tableexport-display")=="always"||n(this).closest("table").data("tableexport-display")=="always")}).find(r),s=0,c=0;if(h.each(function(t){if((n(this).data("tableexport-display")=="always"||n(this).css("display")!="none"&&n(this).css("visibility")!="hidden"&&n(this).data("tableexport-display")!="none")&&gi(h,t)===!1&&typeof e=="function"){var i,f=0,r,o=0;if(typeof y[u]!="undefined"&&y[u].length>0)for(i=0;i<=t;i++)typeof y[u][i]!="undefined"&&(e(null,u,i),delete y[u][i],t++);for(c=t,n(this).is("[colspan]")&&(f=parseInt(n(this).attr("colspan")),s+=f>0?f-1:0),n(this).is("[rowspan]")&&(o=parseInt(n(this).attr("rowspan"))),e(this,u,t),i=0;i<f-1;i++)e(null,u,t+i);if(o)for(r=1;r<o;r++)for(typeof y[u+r]=="undefined"&&(y[u+r]=[]),y[u+r][t+s]="",i=1;i<f;i++)y[u+r][t+s-i]=""}}),typeof y[u]!="undefined"&&y[u].length>0)for(o=0;o<=y[u].length;o++)typeof y[u][o]!="undefined"&&(e(null,u,o),delete y[u][o])}}function hi(n,t){if(i.consoleLog===!0&&console.log(n.output()),i.outputMode==="string")return n.output();if(i.outputMode==="base64")return g(n.output());if(i.outputMode==="window"){window.open(URL.createObjectURL(n.output("blob")));return}try{var r=n.output("blob");saveAs(r,i.fileName+".pdf")}catch(u){b(i.fileName+".pdf","data:application/pdf"+(t?"":";base64")+",",t?r:n.output())}}function ci(n,t,i){var r=0,f,s,h,o;if(typeof i!="undefined"&&(r=i.colspan),r>=0){var u=n.width,e=n.textPos.x,c=t.table.columns.indexOf(t.column);for(f=1;f<r;f++)s=t.table.columns[c+f],u+=s.width;return r>1&&(n.styles.halign==="right"?e=n.textPos.x+u-n.width:n.styles.halign==="center"&&(e=n.textPos.x+(u-n.width)/2)),n.width=u,n.textPos.x=e,typeof i!="undefined"&&i.rowspan>1&&(n.height=n.height*i.rowspan),(n.styles.valign==="middle"||n.styles.valign==="bottom")&&(h=typeof n.text=="string"?n.text.split(/\r\n|\r|\n/g):n.text,o=h.length||1,o>2&&(n.textPos.y-=(2-kt)/2*t.row.styles.fontSize*(o-2)/3)),!0}return!1}function li(t,i,r){typeof r.images!="undefined"&&i.each(function(){var i=n(this).children(),u;n(this).is("img")&&(u=wi(this.src),r.images[u]={url:this.src,src:this.src});typeof i!="undefined"&&i.length>0&&li(t,i,r)})}function nr(n,t){function f(){t(u)}function e(n){if(n.url){var t=new Image;u=++r;t.crossOrigin="Anonymous";t.onerror=t.onload=function(){if(t.complete&&(t.src.indexOf("data:image/")===0&&(t.width=n.width||t.width||0,t.height=n.height||t.height||0),t.width+t.height)){var i=document.createElement("canvas"),u=i.getContext("2d");i.width=t.width;i.height=t.height;u.drawImage(t,0,0);n.src=i.toDataURL("image/jpeg")}--r||f()};t.src=n.url}}var i,u=0,r=0;if(typeof n.images!="undefined")for(i in n.images)n.images.hasOwnProperty(i)&&e(n.images[i]);return r||f()}function ai(t,r,u){r.each(function(){var e=n(this).children(),l,s;if(n(this).is("div")){var p=wt(k(this,"background-color"),[255,255,255]),w=wt(k(this,"border-top-color"),[0,0,0]),h=bt(this,"border-top-width",i.jspdf.unit),c=this.getBoundingClientRect(),b=this.offsetLeft*u.dw,o=this.offsetTop*u.dh,d=c.width*u.dw,g=c.height*u.dh;u.doc.setDrawColor.apply(undefined,w);u.doc.setFillColor.apply(undefined,p);u.doc.setLineWidth(h);u.doc.rect(t.x+b,t.y+o,d,g,h?"FD":"F")}else if(n(this).is("img")&&typeof u.images!="undefined"&&(l=wi(this.src),s=u.images[l],typeof s!="undefined")){var a=t.width/t.height,v=this.width/this.height,f=t.width,r=t.height,y=.264583*72/25.4,o=0;v<=a?(r=Math.min(t.height,this.height),f=this.width*r/this.height):v>a&&(f=Math.min(t.width,this.width),r=this.height*f/this.width);f*=y;r*=y;r<t.height&&(o=(t.height-r)/2);try{u.doc.addImage(s.src,t.textPos.x,t.y+o,f,r)}catch(nt){}t.textPos.x+=f}typeof e!="undefined"&&e.length>0&&ai(t,e,u)})}function vi(t,i,r){var f,o,h,u,s,v,a;if(typeof r.onAutotableText=="function")r.onAutotableText(r.doc,t,i);else{var e=t.textPos.x,c=t.textPos.y,l={halign:t.styles.halign,valign:t.styles.valign};if(i.length){for(f=i[0];f.previousSibling;)f=f.previousSibling;for(o=!1,h=!1;f;){if(u=f.innerText||f.textContent||"",u=(u.length&&u[0]==" "?" ":"")+n.trim(u)+(u.length>1&&u[u.length-1]==" "?" ":""),n(f).is("br")&&(e=t.textPos.x,c+=r.doc.internal.getFontSize()),n(f).is("b")?o=!0:n(f).is("i")&&(h=!0),(o||h)&&r.doc.setFontType(o&&h?"bolditalic":o?"bold":"italic"),s=r.doc.getStringUnitWidth(u)*r.doc.internal.getFontSize(),s){for(t.styles.overflow==="linebreak"&&e>t.textPos.x&&e+s>t.textPos.x+t.width&&(v=".,!%*;:=-",v.indexOf(u.charAt(0))>=0&&(a=u.charAt(0),s=r.doc.getStringUnitWidth(a)*r.doc.internal.getFontSize(),e+s<=t.textPos.x+t.width&&(r.doc.autoTableText(a,e,c,l),u=u.substring(1,u.length)),s=r.doc.getStringUnitWidth(u)*r.doc.internal.getFontSize()),e=t.textPos.x,c+=r.doc.internal.getFontSize());u.length&&e+s>t.textPos.x+t.width;)u=u.substring(0,u.length-1),s=r.doc.getStringUnitWidth(u)*r.doc.internal.getFontSize();r.doc.autoTableText(u,e,c,l);e+=s}(o||h)&&(n(f).is("b")?o=!1:n(f).is("i")&&(h=!1),r.doc.setFontType(!o&&!h?"normal":o?"bold":"italic"));f=f.nextSibling}t.textPos.x=e;t.textPos.y=c}else r.doc.autoTableText(t.text,t.textPos.x,t.textPos.y,l)}}function tr(n){return n.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function pt(n,t,i){return n.replace(new RegExp(tr(t),"g"),i)}function yi(n){return n=n||"0",n=pt(n,i.numbers.html.thousandsSeparator,""),n=pt(n,i.numbers.html.decimalMark,"."),typeof n=="number"||jQuery.isNumeric(n)!==!1?n:!1}function a(t,r,u){var e="",s,f,c,a,h,o,l;if(t!==null){if(s=n(t),s[0].hasAttribute("data-tableexport-value"))f=s.data("tableexport-value");else if(f=s.html(),typeof i.onCellHtmlData=="function")f=i.onCellHtmlData(s,r,u,f);else if(f!=""){var v=n.parseHTML(f),y=0,p=0;f="";n.each(v,function(){n(this).is("input")?f+=s.find("input").eq(y++).val():n(this).is("select")?f+=s.find("select option:selected").eq(p++).text():typeof n(this).html()=="undefined"?f+=n(this).text():(jQuery().bootstrapTable===undefined||n(this).hasClass("filterControl")!==!0)&&(f+=n(this).html())})}i.htmlContent===!0?e=n.trim(f):f!=""&&(c=f.replace(/\n/g,"\u2028").replace(/<br\s*[\/]?>/gi,""),a=n("<div/>").html(c).contents(),c="",n.each(a.text().split("\u2028"),function(t,i){t>0&&(c+=" ");c+=n.trim(i)}),n.each(c.split(""),function(t,i){t>0&&(e+="\n");e+=n.trim(i).replace(/\u00AD/g,"")}),i.type=="json"||i.numbers.output===!1?(h=yi(e),h!==!1&&(e=Number(h))):(i.numbers.html.decimalMark!=i.numbers.output.decimalMark||i.numbers.html.thousandsSeparator!=i.numbers.output.thousandsSeparator)&&(h=yi(e),h!==!1&&(o=(""+h).split("."),o.length==1&&(o[1]=""),l=o[0].length>3?o[0].length%3:0,e=(h<0?"-":"")+(i.numbers.output.thousandsSeparator?(l?o[0].substr(0,l)+i.numbers.output.thousandsSeparator:"")+o[0].substr(l).replace(/(\d{3})(?=\d)/g,"$1"+i.numbers.output.thousandsSeparator):o[0])+(o[1].length?i.numbers.output.decimalMark+o[1]:""))));i.escape===!0&&(e=escape(e));typeof i.onCellData=="function"&&(e=i.onCellData(s,r,u,e))}return e}function ir(n,t,i){return t+"-"+i.toLowerCase()}function wt(n,t){var i=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/.exec(n),r=t;return i&&(r=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])]),r}function pi(t){var r=k(t,"text-align"),o=k(t,"font-weight"),e=k(t,"font-style"),i="",u,f;return r=="start"&&(r=k(t,"direction")=="rtl"?"right":"left"),o>=700&&(i="bold"),e=="italic"&&(i+=e),i===""&&(i="normal"),u={style:{align:r,bcolor:wt(k(t,"background-color"),[255,255,255]),color:wt(k(t,"color"),[0,0,0]),fstyle:i},colspan:parseInt(n(t).attr("colspan"))||0,rowspan:parseInt(n(t).attr("rowspan"))||0},t!==null&&(f=t.getBoundingClientRect(),u.rect={width:f.width,height:f.height}),u}function k(n,t){try{return window.getComputedStyle?(t=t.replace(/([a-z])([A-Z])/,ir),window.getComputedStyle(n,null).getPropertyValue(t)):n.currentStyle?n.currentStyle[t]:n.style[t]}catch(i){}return""}function rr(n,t,i){var u=100,r=document.createElement("div"),f;return r.style.overflow="hidden",r.style.visibility="hidden",n.appendChild(r),r.style.width=u+i,f=u/r.offsetWidth,n.removeChild(r),t*f}function bt(n,t,i){var u=k(n,t),r=u.match(/\d+/);return r!==null?(r=r[0],rr(n.parentElement,r,i)):0}function ri(){if(!(this instanceof ri))return new ri;this.SheetNames=[];this.Sheets={}}function ur(n){for(var i=new ArrayBuffer(n.length),r=new Uint8Array(i),t=0;t!=n.length;++t)r[t]=n.charCodeAt(t)&255;return i}function fr(n,t){t&&(n+=1462);var i=Date.parse(n);return(i-new Date(Date.UTC(1899,11,30)))/864e5}function er(n){for(var u,t,e,f={},i={s:{c:1e7,r:1e7},e:{c:0,r:0}},r=0;r!=n.length;++r)for(u=0;u!=n[r].length;++u)(i.s.r>r&&(i.s.r=r),i.s.c>u&&(i.s.c=u),i.e.r<r&&(i.e.r=r),i.e.c<u&&(i.e.c=u),t={v:n[r][u]},t.v!==null)&&(e=XLSX.utils.encode_cell({c:u,r:r}),typeof t.v=="number"?t.t="n":typeof t.v=="boolean"?t.t="b":t.v instanceof Date?(t.t="n",t.z=XLSX.SSF._table[14],t.v=fr(t.v)):t.t="s",f[e]=t);return i.s.c<1e7&&(f["!ref"]=XLSX.utils.encode_range(i)),f}function wi(n){var t=0,i,r,u;if(n.length===0)return t;for(i=0,u=n.length;i<u;i++)r=n.charCodeAt(i),t=(t<<5)-t+r|0;return t}function b(n,t,i){var e=window.navigator.userAgent,u,r,f;n!==!1&&(e.indexOf("MSIE ")>0||!!e.match(/Trident.*rv\:11\./))?window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(new Blob([i]),n):(u=document.createElement("iframe"),u&&(document.body.appendChild(u),u.setAttribute("style","display:none"),u.contentDocument.open("txt/html","replace"),u.contentDocument.write(i),u.contentDocument.close(),u.focus(),u.contentDocument.execCommand("SaveAs",!0,n),document.body.removeChild(u))):(r=document.createElement("a"),r&&(f=null,r.style.display="none",n!==!1?r.download=n:r.target="_blank",typeof i=="object"?(f=window.URL.createObjectURL(i),r.href=f):r.href=t.toLowerCase().indexOf("base64,")>=0?t+g(i):t+encodeURIComponent(i),document.body.appendChild(r),document.createEvent?(ot===null&&(ot=document.createEvent("MouseEvents")),ot.initEvent("click",!0,!1),r.dispatchEvent(ot)):document.createEventObject?r.fireEvent("onclick"):typeof r.onclick=="function"&&r.onclick(),f&&window.URL.revokeObjectURL(f),document.body.removeChild(r)))}function or(n){var i,r,t;for(n=n.replace(/\x0d\x0a/g,"\n"),i="",r=0;r<n.length;r++)t=n.charCodeAt(r),t<128?i+=String.fromCharCode(t):t>127&&t<2048?(i+=String.fromCharCode(t>>6|192),i+=String.fromCharCode(t&63|128)):(i+=String.fromCharCode(t>>12|224),i+=String.fromCharCode(t>>6&63|128),i+=String.fromCharCode(t&63|128));return i}function g(n){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="",o,i,r,h,c,s,u,f=0;for(n=or(n);f<n.length;)o=n.charCodeAt(f++),i=n.charCodeAt(f++),r=n.charCodeAt(f++),h=o>>2,c=(o&3)<<4|i>>4,s=(i&15)<<2|r>>6,u=r&63,isNaN(i)?s=u=64:isNaN(r)&&(u=64),e=e+t.charAt(h)+t.charAt(c)+t.charAt(s)+t.charAt(u);return e}var i={consoleLog:!1,csvEnclosure:'"',csvSeparator:",",csvUseBOM:!0,displayTableName:!1,escape:!1,excelstyles:[],fileName:"tableExport",htmlContent:!1,ignoreColumn:[],ignoreRow:[],jsonScope:"all",jspdf:{orientation:"p",unit:"pt",format:"a4",margins:{left:20,right:10,top:10,bottom:10},autotable:{styles:{cellPadding:2,rowHeight:12,fontSize:8,fillColor:255,textColor:50,fontStyle:"normal",overflow:"ellipsize",halign:"left",valign:"middle"},headerStyles:{fillColor:[52,73,94],textColor:255,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:245},tableExport:{onAfterAutotable:null,onBeforeAutotable:null,onAutotableText:null,onTable:null,outputImages:!0}}},numbers:{html:{decimalMark:".",thousandsSeparator:","},output:{decimalMark:".",thousandsSeparator:","}},onCellData:null,onCellHtmlData:null,onMsoNumberFormat:null,outputMode:"file",pdfmake:{enabled:!1},tbodySelector:"tr",tfootSelector:"tr",theadSelector:"tr",tableName:"myTableName",type:"csv",worksheetName:"xlsWorksheetName"},kt=1.15,h=this,ot=null,s=[],u=[],f=0,y=[],e="",it=[],l,p,rt,st,c,nt,ht,tt,w,dt,o,gt,ct,lt,ni,fi,at,vt,ei,oi,ti,r;if(n.extend(!0,i,t),it=ii(h),i.type=="csv"||i.type=="tsv"||i.type=="txt"){p="";rt=0;f=0;function bi(n,t,r){var u="",f,e;return n!==null&&(f=a(n,t,r),e=f===null||f===""?"":f.toString(),i.type=="tsv"?(f instanceof Date&&(u=f.toLocaleString()),u=pt(e,"\t"," ")):f instanceof Date?u=i.csvEnclosure+f.toLocaleString()+i.csvEnclosure:(u=pt(e,i.csvEnclosure,i.csvEnclosure+i.csvEnclosure),(u.indexOf(i.csvSeparator)>=0||/[\r\n ]/g.test(u))&&(u=i.csvEnclosure+u+i.csvEnclosure))),u}if(st=function(t,r,u){return t.each(function(){e="";v(this,r,f,u+t.length,function(n,t,r){e+=bi(n,t,r)+(i.type=="tsv"?"\t":i.csvSeparator)});e=n.trim(e).substring(0,e.length-1);e.length>0&&(p.length>0&&(p+="\n"),p+=e);f++}),t.length},rt+=st(n(h).find("thead").first().find(i.theadSelector),"th,td",rt),n(h).find("tbody").each(function(){rt+=st(n(this).find(i.tbodySelector),"td,th",rt)}),i.tfootSelector.length&&st(n(h).find("tfoot").first().find(i.tfootSelector),"td,th",rt),p+="\n",i.consoleLog===!0&&console.log(p),i.outputMode==="string")return p;if(i.outputMode==="base64")return g(p);if(i.outputMode==="window"){b(!1,"data:text/"+(i.type=="csv"?"csv":"plain")+";charset=utf-8,",p);return}try{l=new Blob([p],{type:"text/"+(i.type=="csv"?"csv":"plain")+";charset=utf-8"});saveAs(l,i.fileName+"."+i.type,i.type!="csv"||i.csvUseBOM===!1)}catch(sr){b(i.fileName+"."+i.type,"data:text/"+(i.type=="csv"?"csv":"plain")+";charset=utf-8,"+(i.type=="csv"&&i.csvUseBOM?"":""),p)}}else if(i.type=="sql"){if(f=0,c="INSERT INTO `"+i.tableName+"` (",s=n(h).find("thead").first().find(i.theadSelector),s.each(function(){v(this,"th,td",f,s.length,function(n,t,i){c+="'"+a(n,t,i)+"',"});f++;c=n.trim(c);c=n.trim(c).substring(0,c.length-1)}),c+=") VALUES ",n(h).find("tbody").each(function(){u.push.apply(u,n(this).find(i.tbodySelector))}),i.tfootSelector.length&&u.push.apply(u,n(h).find("tfoot").find(i.tfootSelector)),n(u).each(function(){e="";v(this,"td,th",f,s.length+u.length,function(n,t,i){e+="'"+a(n,t,i)+"',"});e.length>3&&(c+="("+e,c=n.trim(c).substring(0,c.length-1)+"),");f++}),c=n.trim(c).substring(0,c.length-1),c+=";",i.consoleLog===!0&&console.log(c),i.outputMode==="string")return c;if(i.outputMode==="base64")return g(c);try{l=new Blob([c],{type:"text/plain;charset=utf-8"});saveAs(l,i.fileName+".sql")}catch(sr){b(i.fileName+".sql","data:application/sql;charset=utf-8,",c)}}else if(i.type=="json"){if(nt=[],s=n(h).find("thead").first().find(i.theadSelector),s.each(function(){var n=[];v(this,"th,td",f,s.length,function(t,i,r){n.push(a(t,i,r))});nt.push(n)}),ht=[],n(h).find("tbody").each(function(){u.push.apply(u,n(this).find(i.tbodySelector))}),i.tfootSelector.length&&u.push.apply(u,n(h).find("tfoot").find(i.tfootSelector)),n(u).each(function(){var t={},i=0;v(this,"td,th",f,s.length+u.length,function(n,r,u){nt.length?t[nt[nt.length-1][i]]=a(n,r,u):t[i]=a(n,r,u);i++});n.isEmptyObject(t)===!1&&ht.push(t);f++}),tt="",tt=i.jsonScope=="head"?JSON.stringify(nt):i.jsonScope=="data"?JSON.stringify(ht):JSON.stringify({header:nt,data:ht}),i.consoleLog===!0&&console.log(tt),i.outputMode==="string")return tt;if(i.outputMode==="base64")return g(tt);try{l=new Blob([tt],{type:"application/json;charset=utf-8"});saveAs(l,i.fileName+".json")}catch(sr){b(i.fileName+".json","data:application/json;charset=utf-8;base64,",tt)}}else if(i.type==="xml"){if(f=0,w='<?xml version="1.0" encoding="utf-8"?>',w+="<tabledata><fields>",s=n(h).find("thead").first().find(i.theadSelector),s.each(function(){v(this,"th,td",f,s.length,function(n,t,i){w+="<field>"+a(n,t,i)+"<\/field>"});f++}),w+="<\/fields><data>",dt=1,n(h).find("tbody").each(function(){u.push.apply(u,n(this).find(i.tbodySelector))}),i.tfootSelector.length&&u.push.apply(u,n(h).find("tfoot").find(i.tfootSelector)),n(u).each(function(){var n=1;e="";v(this,"td,th",f,s.length+u.length,function(t,i,r){e+="<column-"+n+">"+a(t,i,r)+"<\/column-"+n+">";n++});e.length>0&&e!="<column-1><\/column-1>"&&(w+='<row id="'+dt+'">'+e+"<\/row>",dt++);f++}),w+="<\/data><\/tabledata>",i.consoleLog===!0&&console.log(w),i.outputMode==="string")return w;if(i.outputMode==="base64")return g(w);try{l=new Blob([w],{type:"application/xml;charset=utf-8"});saveAs(l,i.fileName+".xml")}catch(sr){b(i.fileName+".xml","data:application/xml;charset=utf-8;base64,",w)}}else if(i.type=="excel"||i.type=="xls"||i.type=="word"||i.type=="doc"){var ut=i.type=="excel"||i.type=="xls"?"excel":"word",ui=ut=="excel"?"xls":"doc",ki='xmlns:x="urn:schemas-microsoft-com:office:'+ut+'"',di=n(h).filter(function(){return n(this).data("tableexport-display")!="none"&&(n(this).is(":visible")||n(this).data("tableexport-display")=="always")}),d="";if(di.each(function(){var t=n(this);f=0;it=ii(this);d+="<table><thead>";s=t.find("thead").first().find(i.theadSelector);s.each(function(){e="";v(this,"th,td",f,s.length,function(t,r,u){var f,s,o;if(t!==null){f="";e+="<th";for(s in i.excelstyles)i.excelstyles.hasOwnProperty(s)&&(o=n(t).css(i.excelstyles[s]),o!==""&&o!="0px none rgb(0, 0, 0)"&&o!="rgba(0, 0, 0, 0)"&&(f+=f===""?'style="':";",f+=i.excelstyles[s]+":"+o));f!==""&&(e+=" "+f+'"');n(t).is("[colspan]")&&(e+=' colspan="'+n(t).attr("colspan")+'"');n(t).is("[rowspan]")&&(e+=' rowspan="'+n(t).attr("rowspan")+'"');e+=">"+a(t,r,u)+"<\/th>"}});e.length>0&&(d+="<tr>"+e+"<\/tr>");f++});d+="<\/thead><tbody>";t.find("tbody").each(function(){u.push.apply(u,n(this).find(i.tbodySelector))});i.tfootSelector.length&&u.push.apply(u,t.find("tfoot").find(i.tfootSelector));n(u).each(function(){var t=n(this);e="";v(this,"td,th",f,s.length+u.length,function(r,u,f){var s,o,h;if(r!==null){s="";o=n(r).data("tableexport-msonumberformat");typeof o=="undefined"&&typeof i.onMsoNumberFormat=="function"&&(o=i.onMsoNumberFormat(r,u,f));typeof o!="undefined"&&o!==""&&(s="style=\"mso-number-format:'"+o+"'");for(h in i.excelstyles)i.excelstyles.hasOwnProperty(h)&&(o=n(r).css(i.excelstyles[h]),o===""&&(o=t.css(i.excelstyles[h])),o!==""&&o!="0px none rgb(0, 0, 0)"&&o!="rgba(0, 0, 0, 0)"&&(s+=s===""?'style="':";",s+=i.excelstyles[h]+":"+o));e+="<td";s!==""&&(e+=" "+s+'"');n(r).is("[colspan]")&&(e+=' colspan="'+n(r).attr("colspan")+'"');n(r).is("[rowspan]")&&(e+=' rowspan="'+n(r).attr("rowspan")+'"');e+=">"+a(r,u,f).replace(/\n/g,"<br>")+"<\/td>"}});e.length>0&&(d+="<tr>"+e+"<\/tr>");f++});i.displayTableName&&(d+="<tr><td><\/td><\/tr><tr><td><\/td><\/tr><tr><td>"+a(n("<p>"+i.tableName+"<\/p>"))+"<\/td><\/tr>");d+="<\/tbody><\/table>";i.consoleLog===!0&&console.log(d)}),o='<html xmlns:o="urn:schemas-microsoft-com:office:office" '+ki+' xmlns="http://www.w3.org/TR/REC-html40">',o+='<meta http-equiv="content-type" content="application/vnd.ms-'+ut+'; charset=UTF-8">',o+="<head>",ut==="excel"&&(o+="<!--[if gte mso 9]>",o+="<xml>",o+="<x:ExcelWorkbook>",o+="<x:ExcelWorksheets>",o+="<x:ExcelWorksheet>",o+="<x:Name>",o+=i.worksheetName,o+="<\/x:Name>",o+="<x:WorksheetOptions>",o+="<x:DisplayGridlines/>",o+="<\/x:WorksheetOptions>",o+="<\/x:ExcelWorksheet>",o+="<\/x:ExcelWorksheets>",o+="<\/x:ExcelWorkbook>",o+="<\/xml>",o+="<![endif]-->"),o+="<style>br {mso-data-placement:same-cell;}<\/style>",o+="<\/head>",o+="<body>",o+=d,o+="<\/body>",o+="<\/html>",i.consoleLog===!0&&console.log(o),i.outputMode==="string")return o;if(i.outputMode==="base64")return g(o);try{l=new Blob([o],{type:"application/vnd.ms-"+i.type});saveAs(l,i.fileName+"."+ui)}catch(sr){b(i.fileName+"."+ui,"data:application/vnd.ms-"+ut+";base64,",o)}}else if(i.type=="xlsx"){gt=[];ct=[];f=0;u=n(h).find("thead").first().find(i.theadSelector);n(h).find("tbody").each(function(){u.push.apply(u,n(this).find(i.tbodySelector))});i.tfootSelector.length&&u.push.apply(u,n(h).find("tfoot").find(i.tfootSelector));n(u).each(function(){var n=[];v(this,"th,td",f,u.length,function(t,i,r){var s;if(typeof t!="undefined"&&t!==null){var e=parseInt(t.getAttribute("colspan")),o=parseInt(t.getAttribute("rowspan")),u=a(t,i,r);if(u!==""&&u==+u&&(u=+u),ct.forEach(function(t){if(f>=t.s.r&&f<=t.e.r&&n.length>=t.s.c&&n.length<=t.e.c)for(var i=0;i<=t.e.c-t.s.c;++i)n.push(null)}),(o||e)&&(o=o||1,e=e||1,ct.push({s:{r:f,c:n.length},e:{r:f+o-1,c:n.length+e-1}})),n.push(u!==""?u:null),e)for(s=0;s<e-1;++s)n.push(null)}});gt.push(n);f++});lt=new ri;ni=er(gt);ni["!merges"]=ct;lt.SheetNames.push(i.worksheetName);lt.Sheets[i.worksheetName]=ni;fi=XLSX.write(lt,{bookType:i.type,bookSST:!1,type:"binary"});try{l=new Blob([ur(fi)],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});saveAs(l,i.fileName+"."+i.type)}catch(sr){b(i.fileName+"."+i.type,"data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8,",l)}}else if(i.type=="png")html2canvas(n(h)[0]).then(function(n){for(var u=n.toDataURL(),t=atob(u.substring(22)),f=new ArrayBuffer(t.length),e=new Uint8Array(f),r=0;r<t.length;r++)e[r]=t.charCodeAt(r);if(i.consoleLog===!0&&console.log(t),i.outputMode==="string")return t;if(i.outputMode==="base64")return g(u);if(i.outputMode==="window"){window.open(u);return}try{l=new Blob([f],{type:"image/png"});saveAs(l,i.fileName+".png")}catch(o){b(i.fileName+".png","data:image/png,",l)}});else if(i.type=="pdf")if(i.pdfmake.enabled===!0)at=[],vt=[],f=0,s=n(this).find("thead").first().find(i.theadSelector),s.each(function(){var n=[],t;for(v(this,"th,td",f,s.length,function(t,i,r){n.push(a(t,i,r))}),n.length&&vt.push(n),t=at.length;t<n.length;t++)at.push("*");f++}),n(this).find("tbody").each(function(){u.push.apply(u,n(this).find(i.tbodySelector))}),i.tfootSelector.length&&u.push.apply(u,n(this).find("tfoot").find(i.tfootSelector)),n(u).each(function(){var n=[];v(this,"td,th",f,s.length+u.length,function(t,i,r){n.push(a(t,i,r))});n.length&&vt.push(n);f++}),ei={pageOrientation:"landscape",content:[{table:{headerRows:s.length,widths:at,body:vt}}],defaultStyle:{font:"Roboto"}},pdfMake.fonts={Roboto:{normal:"Roboto-Regular.ttf",bold:"Roboto-Medium.ttf",italics:"Roboto-Italic.ttf",bolditalics:"Roboto-MediumItalic.ttf"}},pdfMake.createPdf(ei).getBuffer(function(n){try{var t=new Blob([n],{type:"application/pdf"});saveAs(t,i.fileName+".pdf")}catch(r){b(i.fileName+".pdf","data:application/pdf;base64,",n)}});else if(i.jspdf.autotable===!1)oi={dim:{w:bt(n(h).first().get(0),"width","mm"),h:bt(n(h).first().get(0),"height","mm")},pagesplit:!1},ti=new jsPDF(i.jspdf.orientation,i.jspdf.unit,i.jspdf.format),ti.addHTML(n(h).first(),i.jspdf.margins.left,i.jspdf.margins.top,oi,function(){hi(ti,!1)});else{if(r=i.jspdf.autotable.tableExport,typeof i.jspdf.format=="string"&&i.jspdf.format.toLowerCase()==="bestfit"){var ft={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89]},yt="",et="",si=0;n(h).filter(":visible").each(function(){var t,i;if(n(this).css("display")!="none"&&(t=bt(n(this).get(0),"width","pt"),t>si)){t>ft.a0[0]&&(yt="a0",et="l");for(i in ft)ft.hasOwnProperty(i)&&ft[i][1]>t&&(yt=i,et="l",ft[i][0]>t&&(et="p"));si=t}});i.jspdf.format=yt===""?"a4":yt;i.jspdf.orientation=et===""?"w":et}r.doc=new jsPDF(i.jspdf.orientation,i.jspdf.unit,i.jspdf.format);r.outputImages===!0&&(r.images={});typeof r.images!="undefined"&&(n(h).filter(function(){return n(this).data("tableexport-display")!="none"&&(n(this).is(":visible")||n(this).data("tableexport-display")=="always")}).each(function(){var t=0;s=n(this).find("thead").find(i.theadSelector);n(this).find("tbody").each(function(){u.push.apply(u,n(this).find(i.tbodySelector))});i.tfootSelector.length&&u.push.apply(u,n(this).find("tfoot").find(i.tfootSelector));n(u).each(function(){v(this,"td,th",s.length+t,s.length+u.length,function(t){if(typeof t!="undefined"&&t!==null){var i=n(t).children();typeof i!="undefined"&&i.length>0&&li(t,i,r)}});t++})}),s=[],u=[]);nr(r,function(){n(h).filter(function(){return n(this).data("tableexport-display")!="none"&&(n(this).is(":visible")||n(this).data("tableexport-display")=="always")}).each(function(){var e,f=0,t,o,h;if(it=ii(this),r.columns=[],r.rows=[],r.rowoptions={},typeof r.onTable=="function"&&r.onTable(n(this),i)===!1)return!0;if(i.jspdf.autotable.tableExport=null,t=n.extend(!0,{},i.jspdf.autotable),i.jspdf.autotable.tableExport=r,t.margin={},n.extend(!0,t.margin,i.jspdf.margins),t.tableExport=r,typeof t.beforePageContent!="function"&&(t.beforePageContent=function(n){if(n.pageCount==1){var t=n.table.rows.concat(n.table.headerRow);t.forEach(function(t){t.height>0&&(t.height+=(2-kt)/2*t.styles.fontSize,n.table.height+=(2-kt)/2*t.styles.fontSize)})}}),typeof t.createdHeaderCell!="function"&&(t.createdHeaderCell=function(i,u){var f,e;i.styles=n.extend({},u.row.styles);typeof r.columns[u.column.dataKey]!="undefined"&&(f=r.columns[u.column.dataKey],typeof f.rect!="undefined"&&(i.contentWidth=f.rect.width,(typeof r.heightRatio=="undefined"||r.heightRatio===0)&&(e=u.row.raw[u.column.dataKey].rowspan?u.row.raw[u.column.dataKey].rect.height/u.row.raw[u.column.dataKey].rowspan:u.row.raw[u.column.dataKey].rect.height,r.heightRatio=i.styles.rowHeight/e),e=u.row.raw[u.column.dataKey].rect.height*r.heightRatio,e>i.styles.rowHeight&&(i.styles.rowHeight=e)),typeof f.style!="undefined"&&f.style.hidden!==!0&&(i.styles.halign=f.style.align,t.styles.fillColor==="inherit"&&(i.styles.fillColor=f.style.bcolor),t.styles.textColor==="inherit"&&(i.styles.textColor=f.style.color),t.styles.fontStyle==="inherit"&&(i.styles.fontStyle=f.style.fstyle)))}),typeof t.createdCell!="function"&&(t.createdCell=function(n,i){var u=r.rowoptions[i.row.index+":"+i.column.dataKey];typeof u!="undefined"&&typeof u.style!="undefined"&&u.style.hidden!==!0&&(n.styles.halign=u.style.align,t.styles.fillColor==="inherit"&&(n.styles.fillColor=u.style.bcolor),t.styles.textColor==="inherit"&&(n.styles.textColor=u.style.color),t.styles.fontStyle==="inherit"&&(n.styles.fontStyle=u.style.fstyle))}),typeof t.drawHeaderCell!="function"&&(t.drawHeaderCell=function(n,t){var i=r.columns[t.column.dataKey];return(i.style.hasOwnProperty("hidden")!==!0||i.style.hidden!==!0)&&i.rowIndex>=0?ci(n,t,i):!1}),typeof t.drawCell!="function"&&(t.drawCell=function(n,t){var i=r.rowoptions[t.row.index+":"+t.column.dataKey],u,f;return ci(n,t,i)&&(r.doc.rect(n.x,n.y,n.width,n.height,n.styles.fillStyle),typeof i!="undefined"&&typeof i.kids!="undefined"&&i.kids.length>0?(u=n.height/i.rect.height,(u>r.dh||typeof r.dh=="undefined")&&(r.dh=u),r.dw=n.width/i.rect.width,f=n.textPos.y,ai(n,i.kids,r),n.textPos.y=f,vi(n,i.kids,r)):vi(n,{},r)),!1}),r.headerrows=[],s=n(this).find("thead").find(i.theadSelector),s.each(function(){e=0;r.headerrows[f]=[];v(this,"th,td",f,s.length,function(n,t,i){var u=pi(n);u.title=a(n,t,i);u.key=e++;u.rowIndex=f;r.headerrows[f].push(u)});f++}),f>0)for(o=f-1;o>=0;)n.each(r.headerrows[o],function(){var n=this;o>0&&this.rect===null&&(n=r.headerrows[o-1][this.key]);n!==null&&n.rowIndex>=0&&(n.style.hasOwnProperty("hidden")!==!0||n.style.hidden!==!0)&&r.columns.push(n)}),o=r.columns.length>0?-1:o-1;if(h=0,u=[],n(this).find("tbody").each(function(){u.push.apply(u,n(this).find(i.tbodySelector))}),i.tfootSelector.length&&u.push.apply(u,n(this).find("tfoot").find(i.tfootSelector)),n(u).each(function(){var t=[];e=0;v(this,"td,th",f,s.length+u.length,function(i,u,f){var o;typeof r.columns[e]=="undefined"&&(o={title:"",key:e,style:{hidden:!0}},r.columns.push(o));typeof i!="undefined"&&i!==null?(o=pi(i),o.kids=n(i).children(),r.rowoptions[h+":"+e++]=o):(o=n.extend(!0,{},r.rowoptions[h+":"+(e-1)]),o.colspan=-1,r.rowoptions[h+":"+e++]=o);t.push(a(i,u,f))});t.length&&(r.rows.push(t),h++);f++}),typeof r.onBeforeAutotable=="function")r.onBeforeAutotable(n(this),r.columns,r.rows,t);if(r.doc.autoTable(r.columns,r.rows,t),typeof r.onAfterAutotable=="function")r.onAfterAutotable(n(this),t);i.jspdf.autotable.startY=r.doc.autoTableEndPosY()+t.margin.top});hi(r.doc,typeof r.images!="undefined"&&jQuery.isEmptyObject(r.images)===!1);typeof r.headerrows!="undefined"&&(r.headerrows.length=0);typeof r.columns!="undefined"&&(r.columns.length=0);typeof r.rows!="undefined"&&(r.rows.length=0);delete r.doc;r.doc=null})}return this}})})(jQuery);var $table="#table",$url=$area+$($table).attr("data-url"),$urlCreate=$areaSegment+$($table).attr("data-url-create"),$urlEdit=$areaSegment+$($table).attr("data-url-edit"),$remove="#remove",selections=[],params_flag=1,params_dateStart=null,params_dateEnd=null,$indexBtnAdd="#indexBtnAdd",$indexBtnDeleteRecover="#indexBtnDeleteRecover",$indexBtnDeleteForever="#indexBtnDeleteForever",$indexBtnUse="#indexBtnUse",$indexBtnTrash="#indexBtnTrash",$dateStart="#dateStart",$dateEnd="#dateEnd";$(function(){$($table).bootstrapTable({url:$url,locales:"customs"});$($table).on("load-success.bs.table",function(){$("#table "+$isTooltip).tooltip({animation:!1})});$("#toolbar").find("select").change(function(){$($table).bootstrapTable("refresh").bootstrapTable({exportDataType:$(this).val()})});setFlagActive(params_flag)});window.cmdEvents={"click .edit":function(n,t,i){getForm({element:n,url:$urlEdit,data:{id:i.id},form:formEdit,modal:ModalEdit,TinyMCE:!0})},"click .delete":function(n,t,i){params_flag==1?$("#ModalComfirmBody").html(TMLanguage("Global.msgDeleteRecord")):$("#ModalComfirmBody").html(TMLanguage("Global.msgRecoverRecord"));$("#ModalComfirm").modal("show");$("#ModalComfirmBtnConfirm").off("click").on("click",function(){$.post($url+"/Remove",{id:i.id,__RequestVerificationToken:$('[name="__RequestVerificationToken"]').val()},function(n){n.success?($($TMAlert).TMAlert({type:"success",message:TMLanguage(n.success)}),$($table).bootstrapTable("remove",{field:"id",values:[i.id]})):n.danger&&$($TMAlert).TMAlert({type:"danger",message:TMLanguage(n.danger)})})})},"click .resetPass":function(n,t,i){$("#ModalComfirmBody").html(TMLanguage("Users.msgResetPassword"));$("#ModalComfirm").modal("show");$("#ModalComfirmBtnConfirm").off("click").on("click",function(){$.post($url+"/resetPassword",{id:i.id,__RequestVerificationToken:$('[name="__RequestVerificationToken"]').val()},function(n){n.success?$($TMAlert).TMAlert({type:"success",message:TMLanguage(n.success).StringFormat(i.username,n.data)}):n.danger&&$($TMAlert).TMAlert({type:"danger",message:TMLanguage(n.danger)})})})}};$.fn.bootstrapTable.locales.customs={formatLoadingMessage:function(){return TMLanguage("BSTable.formatLoadingMessage")},formatRecordsPerPage:function(n){return TMLanguage("BSTable.formatRecordsPerPage").StringFormat(n)},formatShowingRows:function(n,t,i){return TMLanguage("BSTable.formatShowingRows").StringFormat(n,t,i)},formatDetailPagination:function(n){return TMLanguage("BSTable.formatDetailPagination").attr("title").StringFormat(n)},formatSearch:function(){return TMLanguage("BSTable.formatSearch")},formatNoMatches:function(){return TMLanguage("BSTable.formatNoMatches")},formatPaginationSwitch:function(){return TMLanguage("BSTable.formatPaginationSwitch")},formatRefresh:function(){return TMLanguage("BSTable.formatRefresh")},formatToggle:function(){return TMLanguage("BSTable.formatToggle")},formatColumns:function(){return TMLanguage("BSTable.formatColumns")},formatAllRows:function(){return TMLanguage("BSTable.formatAllRows")},formatExport:function(){return TMLanguage("BSTable.formatExport")}};$.extend($.fn.bootstrapTable.defaults,$.fn.bootstrapTable.locales.customs);$("#dateStart").datetimepicker({defaultDate:new Date(DateNow.getFullYear(),DateNow.getMonth(),1),format:"DD/MM/YYYY"});$("#dateEnd").datetimepicker({defaultDate:DateNow,format:"DD/MM/YYYY"});$($dateStart).on("blur",function(){params_dateStart=$($dateStart).val();params_dateEnd=$($dateEnd).val();$($table).bootstrapTable("refresh")});$($dateEnd).on("blur",function(){params_dateStart=$($dateStart).val();params_dateEnd=$($dateEnd).val();$($table).bootstrapTable("refresh")});AjaxLoaddingSpinner();$($indexBtnAdd).off("click").on("click",function(){var n=$(document).find(formCreate),t=n.find(ModalCreate);t.length<1&&$.get($urlCreate,function(t){n.append(t);n.find(ModalCreate).modal("show")}).done(function(){getTinyMCE()}).fail(function(){console.log("Error")})});$($indexBtnDeleteRecover).off("click").on("click",function(){var n=$($table).find('[name="btSelectItem"]:checked');if(n.length>0){params_flag==1?$("#ModalComfirmBody").html(TMLanguage("Global.msgDeleteRecord")):$("#ModalComfirmBody").html(TMLanguage("Global.msgRecoverRecord"));$("#ModalComfirm").modal("show");$("#ModalComfirmBtnConfirm").off("click").on("click",function(){var t=",";n.each(function(){t+=$(this).val()+","});$.ajax({type:"POST",url:$url+"/Remove",data:{id:t,__RequestVerificationToken:$('[name="__RequestVerificationToken"]').val()},success:function(n){n.success?($($TMAlert).TMAlert({type:"success",message:TMLanguage(n.success)}),$($table).bootstrapTable("refresh")):n.danger&&$($TMAlert).TMAlert({type:"danger",message:TMLanguage(n.danger)})}})})}});$($indexBtnDeleteForever).off("click").on("click",function(){var n=$($table).find('[name="btSelectItem"]:checked');if(n.length>0){$("#ModalComfirmBody").html(TMLanguage("Global.msgDeleteRecord"));$("#ModalComfirm").modal("show");$("#ModalComfirmBtnConfirm").off("click").on("click",function(){var t=",";n.each(function(){t+=$(this).val()+","});$.ajax({type:"DELETE",url:$url,data:{id:t,__RequestVerificationToken:$('[name="__RequestVerificationToken"]').val()},success:function(n){n.success?($($TMAlert).TMAlert({type:"success",message:TMLanguage(n.success)}),$($table).bootstrapTable("refresh")):n.danger&&$($TMAlert).TMAlert({type:"danger",message:TMLanguage(n.danger)})}})})}});$($indexBtnUse).off("click").on("click",function(){params_flag=1;setFlagActive(params_flag);$($table).bootstrapTable("refresh")});$($indexBtnTrash).off("click").on("click",function(){params_flag=0;setFlagActive(params_flag);$($table).bootstrapTable("refresh")});